
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>2. Prune Edge Species &#8212; RMG-Py 3.3.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3. Dynamics Criterion" href="dynamics.html" />
    <link rel="prev" title="1. Rate-based Model Enlarging Algorithm" href="enlarger.html" />
<script type="text/x-mathjax-config">
MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
  MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
    ce: ["Extension","mhchem"],
  });
});
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dynamics.html" title="3. Dynamics Criterion"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="enlarger.html" title="1. Rate-based Model Enlarging Algorithm"
             accesskey="P">previous</a> |</li>
  <li><a href="https://rmg.mit.edu/">RMG</a> &raquo;</li>
  <li><a href="../../index.html">3.3.0 Documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >Theory Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">RMG Theory Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>Prune Edge Species</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="prune-edge-species">
<span id="prune"></span><h1><span class="section-number">2. </span>Prune Edge Species<a class="headerlink" href="#prune-edge-species" title="Permalink to this heading">¶</a></h1>
<p>When dealing with complicated reaction systems, RMG calculation would easily hit the computer memory limitation. Memory profiling shows
most memory especially during memory limitation stage is occupied by edge species. However, most edge species in fact wouldn’t
be included in the core (or final model). Thus, it’s natural to get rid of some not “so useful” edge species during calculation
in order to achieve both low memory consumption and mechanism accuracy. Pruning is such a way.</p>
<section id="key-parameters-in-pruning">
<h2><span class="section-number">2.1. </span>Key Parameters in Pruning<a class="headerlink" href="#key-parameters-in-pruning" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code></p>
<p>Any edge species to prune should have peak flux along the whole conversion course lower than <code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code> <span class="math notranslate nohighlight">\(*\)</span> characteristic flux. Thus, larger values will lead to smaller edge mechanisms.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">toleranceMoveToCore</span></code></p>
<p>Any edge species to enter core model should have flux at some point larger than <code class="docutils literal notranslate"><span class="pre">toleranceMoveToCore</span></code> <span class="math notranslate nohighlight">\(*\)</span> characteristic flux. Thus, in general, smaller values will lead to larger core mechanisms.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code></p>
<p>Once flux of any edge species exceeds <code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code> <span class="math notranslate nohighlight">\(*\)</span> characteristic flux, dynamic simulation will be stopped.
Usually this tolerance will be set a very high value so that any flux’s exceeding that means mechanism is too incomplete to continue
dynamic simulation.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">maximumEdgeSpecies</span></code></p>
<p>If dynamic simulation isn’t interrupted in half way and total number of the edge species whose peak fluxes are higher than
<code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code> <span class="math notranslate nohighlight">\(*\)</span> characteristic flux exceeds <code class="docutils literal notranslate"><span class="pre">maximumEdgeSpecies</span></code>, such excessive amount of edge species with lowest peak fluxes will be pruned.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">minCoreSizeForPrune</span></code></p>
<p>Ensures that a minimum number of species are in the core before pruning occurs, in order to avoid pruning the model when it is far away from completeness.  The default value is set to 50 species.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">minSpeciesExistIterationsForPrune</span></code></p>
<p>Set the number of iterations an edge species must stay in the job before it can be pruned.  The default value is 2 iterations.</p>
</li>
</ul>
</section>
<section id="how-pruning-works">
<h2><span class="section-number">2.2. </span>How Pruning Works<a class="headerlink" href="#how-pruning-works" title="Permalink to this heading">¶</a></h2>
<figure class="align-default" id="id1">
<img alt="../../_images/fluxDiagram.png" src="../../_images/fluxDiagram.png" />
<figcaption>
<p><span class="caption-text">The goal of pruning is to delete those “useless” edge species. So “usefulness” should be defined and it’s natural to have flux as a
criterion for “usefulness”. Since flux changes with reactant conversion, peak flux is chosen here to make decision of pruning or not.
Every time pruning is triggered, edge species with peak flux lower than <code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code> <span class="math notranslate nohighlight">\(*\)</span> characteristic flux will be deleted.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<img alt="../../_images/fluxDiagramWithTolerance.png" src="../../_images/fluxDiagramWithTolerance.png" />
<figcaption>
<p><span class="caption-text">However, pruning is not always triggered because of <code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code>. As mentioned above, in order to prune, RMG needs to figure out
the peak flux of each edge species, which requires dynamic simulation to complete. If some run of dynamic simulation is terminated in half way
by <code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code>, pruning is rejected although there might be some edge species with peak fluxes lower than
<code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code> <span class="math notranslate nohighlight">\(*\)</span> characteristic flux. Since pruning requires to complete dynamic simulation, setting <code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code> to be positive infinity,
as an extreme case, means always enabling pruning. Another extreme case would be that it has same value as <code class="docutils literal notranslate"><span class="pre">toleranceMoveToCore</span></code> where
no pruning occurs.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
<div class="legend">
<p>In summary, each run of dynamic simulation will proceed towards <code class="docutils literal notranslate"><span class="pre">terminationConversion</span></code> unless some flux exceeds
<code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code> <span class="math notranslate nohighlight">\(*\)</span> characteristic flux. Following complete simulation is the pruning of edge species whose flux is not high enough be kept
in the edge, which is followed by pruning of excessive amount of edge species to make sure total edge species number is no greater than <code class="docutils literal notranslate"><span class="pre">maximumEdgeSpecies</span></code>.</p>
</div>
</figcaption>
</figure>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
  <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
    <div class="sphinxsidebarwrapper">
        <div class="sidebarlogo"><a href="../../index.html">
            <img src="../../_static/rmg-logo-small.png" alt="RMG" />
        </a></div>
      <div id="sidebar">
        <div id="rmgsidebar">
          <a href="https://rmg.mit.edu">
            <div class="menuitem">
              <img src="../../_static/rmg-icon.png" class="icon" width="100%"/>
              <div class="menutext menutitle">RMG Website</div>
              <div class="menutext menudesc">Interactive website for RMG-Py</div>
            </div>
          </a>
          <a href="https://github.com/ReactionMechanismGenerator/RMG-Py">
            <div class="menuitem">
              <img src="../../_static/github-icon.png" class="icon" width="100%"/>
              <div class="menutext menutitle">RMG GitHub</div>
              <div class="menutext menudesc">View source and post issues</div>
            </div>
          </a>
        </div>
        <div class="menuitem">
  <div>
    <h3><a href="../../contents.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">2. Prune Edge Species</a><ul>
<li><a class="reference internal" href="#key-parameters-in-pruning">2.1. Key Parameters in Pruning</a></li>
<li><a class="reference internal" href="#how-pruning-works">2.2. How Pruning Works</a></li>
</ul>
</li>
</ul>

  </div>
        </div>
        <div class="menuitem">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="enlarger.html"
                          title="previous chapter"><span class="section-number">1. </span>Rate-based Model Enlarging Algorithm</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="dynamics.html"
                          title="next chapter"><span class="section-number">3. </span>Dynamics Criterion</a></p>
  </div>
        </div>
        <div class="menuitem">
<div role="note" aria-label="source link">
    <h3>This Page</h3>
        <ul class="this-page-menu">
            <li><a href="https://github.com/ReactionMechanismGenerator/RMG-Py/issues">Report A Bug</a></li>
            <li><a href="https://github.com/ReactionMechanismGenerator/RMG-Py/blob/main/documentation/source/theory/rmg/prune.rst"
                   rel="nofollow">View Source</a></li>
        </ul>
</div>
        </div>
        <div class="menuitem">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dynamics.html" title="3. Dynamics Criterion"
             >next</a> |</li>
        <li class="right" >
          <a href="enlarger.html" title="1. Rate-based Model Enlarging Algorithm"
             >previous</a> |</li>
  <li><a href="https://rmg.mit.edu/">RMG</a> &raquo;</li>
  <li><a href="../../index.html">3.3.0 Documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >Theory Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >RMG Theory Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>Prune Edge Species</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2002-2025, William H. Green, Richard H. West, and the RMG Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-24556433-3");
    pageTracker._trackPageview();
  } catch(err) {}
</script>

  </body>
</html>