<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Prune Edge Species &mdash; RMG Py 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/rmg.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="RMG Py 1.0.0 documentation" href="../../contents.html" />
    <link rel="up" title="RMG Theory Guide" href="index.html" />
    <link rel="next" title="Pressure-Dependence Theory Guide" href="../pdep/index.html" />
    <link rel="prev" title="1. Rate-Based Model Enlarger" href="enlarger.html" />
<script type="text/x-mathjax-config">
MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
  MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
    ce: ["Extension","mhchem"],
  });
});
</script>

  </head>
  <body role="document">
<div class="header">
&nbsp;
</div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../pdep/index.html" title="Pressure-Dependence Theory Guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="enlarger.html" title="1. Rate-Based Model Enlarger"
             accesskey="P">previous</a> |</li>
<li><a href="../../index.html">Documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >Theory Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">RMG Theory Guide</a> &raquo;</li> 
      </ul>
    </div>
            
  <div class="section" id="prune-edge-species">
<span id="prune"></span><h1>2. Prune Edge Species<a class="headerlink" href="#prune-edge-species" title="Permalink to this headline">¶</a></h1>
<p>When dealing with complicated reaction systems, RMG calculation would easily hit the computer memory limitation. Memory profiling shows
most memory especially during memory limitation stage is occupied by edge species. However, most edge species in fact wouldn&#8217;t
be included in the core (or final model). Thus, it&#8217;s natural to get rid of some not &#8220;so useful&#8221; edge species during calculation
in order to achieve both low memory consumption and mechanism accuracy. Pruning is such a way.</p>
<div class="section" id="key-parameters-in-pruning">
<h2>2.1. Key Parameters in Pruning<a class="headerlink" href="#key-parameters-in-pruning" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">toleranceKeepInEdge</p>
<p>Any edge species to prune should have peak flux along the whole conversion course lower than toleranceKeepInEdge <span class="math">\(*\)</span> characteristic flux. Thus, larger values will lead to larger edge mechanisms.</p>
</li>
<li><p class="first">toleranceMoveToCore</p>
<p>Any edge species to enter core model should have flux at some point larger than toleranceMoveToCore <span class="math">\(*\)</span> characteristic flux Thus, in general, smaller values will lead to larger core mechanisms.</p>
</li>
<li><p class="first">toleranceInterrupSimulation</p>
<p>Once flux of any edge species exceeds toleranceInterruptSimulation <span class="math">\(*\)</span> characteristic flux, dynamic simulation will be stopped.
Usually this tolerance will be set a very high value so that any flux&#8217;s exceeding that means mechanism is too incomplete to continue
dynamic simulation.</p>
</li>
<li><p class="first">maximumEdgeSpecies</p>
<p>If dynamic simulation isn&#8217;t interrupted in half way and total number of the edge species whose peak fluxes are higher than
toleranceKeepInEdge <span class="math">\(*\)</span> characteristic flux exceeds maximumEdgeSpecies, such excessive amount of edge species with lowest peak fluxes will be pruned.</p>
</li>
</ul>
</div>
<div class="section" id="how-pruning-works">
<h2>2.2. How Pruning Works<a class="headerlink" href="#how-pruning-works" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id1">
<img alt="../../_images/fluxDiagram.png" src="../../_images/fluxDiagram.png" />
<p class="caption"><span class="caption-text">The goal of pruning is to delete those &#8220;useless&#8221; edge species. So &#8220;usefulness&#8221; should be defined and it&#8217;s natural to have flux as a
criterion for &#8220;usefulness&#8221;. Since flux changes with reactant conversion, peak flux is chosen here to make decision of pruning or not.
Every time pruning is triggered, edge species with peak flux lower than toleranceKeepInEdge <span class="math">\(*\)</span> characteristic flux will be deleted.</span></p>
</div>
<div class="figure" id="id2">
<img alt="../../_images/fluxDiagramWithTolerance.png" src="../../_images/fluxDiagramWithTolerance.png" />
<p class="caption"><span class="caption-text">However, pruning is not always triggered because of toleranceInterruptSimulation. As mentioned above, in order to prune, RMG needs to figure out
the peak flux of each edge species, which requires dynamic simulation to complete. If some run of dynamic simulation is terminated in half way
by toleranceInterruptSimulation, pruning is rejected although there might be some edge species with peak fluxes lower than
toleranceKeepInEdge <span class="math">\(*\)</span> characteristic flux. Since pruning requires to complete dynamic simulation, setting toleranceInterruptSimulation to be positive infinity,
as an extreme case, means always enabling pruning. Another extreme case would be that it has same value as toleranceMoveToCore where
no pruning occurs.</span></p>
<div class="legend">
In summary, each run of dynamic simulation will proceed towards terminationConversion unless some flux exceeds
toleranceInterruptSimulation <span class="math">\(*\)</span> characteristic flux.Following complete simulation is the pruning of edge species whose flux is not high enough be kept
in the edge, which is followed by pruning of excessive amount of edge species to make sure total edge species number is no greater than maximumEdgeSpecies.</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div class="sidebarlogo">
<a href="../../index.html"><img src="../../_static/rmg-logo-small.png" alt="RMG" /></a>
</div>
  <h3><a href="../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Prune Edge Species</a><ul>
<li><a class="reference internal" href="#key-parameters-in-pruning">2.1. Key Parameters in Pruning</a></li>
<li><a class="reference internal" href="#how-pruning-works">2.2. How Pruning Works</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

<h4><a href="https://github.com/ReactionMechanismGenerator/RMG-Py/blob/master/documentation/source/theory/rmg/prune.rst"
           rel="nofollow">Edit this page</a></h4><P>
<div class="customsidebar">
<P>
<table cellpadding="3">

<tr><td>
        <a href="http://reactionmechanismgenerator.github.io/RMG-Py"><img src="../../_static/documentation-icon.png" class="icon_sidebar" width="32px" alt="Documentation"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://reactionmechanismgenerator.github.io/RMG-Py">Documentation</a></div>
        <div class="linkdesc">Learn more about the RMG software</div>
</td></tr>

<tr><td>
        <a href="http://rmg.mit.edu/database/"><img src="../../_static/database-logo-small.png" class="icon_sidebar" width="32px" alt="Database"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://rmg.mit.edu/database/">Database</a></div>
        <div class="linkdesc">Browse the RMG database of chemical parameters</div>
</td></tr>

<tr><td>
        <a href="http://rmg.mit.edu/simulate/input"><img src="../../_static/input-logo-small.png" class="icon_sidebar" width="32px" alt="Create Input File"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://rmg.mit.edu/simulate/input">Create Input File</a></div>
        <div class="linkdesc">Online form for making an RMG input file</div>
</td></tr>

<tr><td>
        <a href="http://rmg.mit.edu/group_draw"><img src="../../_static/groupdraw-logo-small.png" class="icon_sidebar" width="32px" alt="Draw Group"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://rmg.mit.edu/group_draw">Draw Group</a></div>
        <div class="linkdesc">Draw a group structure from its adjlist</div>
</td></tr>

<tr><td>
        <a href="http://rmg.mit.edu/molecule_search"><img src="../../_static/moleculedraw-logo-small.png" class="icon_sidebar" width="32px" alt="Molecule Search"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://rmg.mit.edu/molecule_search">Molecule Search</a></div>
        <div class="linkdesc">Draw a molecule from its adjlist and search its properties</div>
</td></tr>

<tr><td>
        <a href="http://rmg.mit.edu/kinetics/search/"><img src="../../_static/kinetics-search-logo-small.png" class="icon_sidebar" width="32px" alt="Kinetics Search"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://rmg.mit.edu/kinetics/search/">Kinetics Search</a></div>
        <div class="linkdesc">Search for the kinetics of a chemical reaction</div>
</td></tr>

<tr><td>
        <a href="http://rmg.mit.edu/solvation_search"><img src="../../_static/solvation-search-logo-small.png" class="icon_sidebar" width="32px" alt="Solvation Search"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://rmg.mit.edu/solvation_search">Solvation Search</a></div>
        <div class="linkdesc">Search for the solvation properties of a reaction between a solvent and a solute</div>
</td></tr>


<tr><td>
        <a href="http://rmg.mit.edu/pdep/"><img src="../../_static/pdep-logo-small.png" class="icon_sidebar" width="32px" alt="Pressure Dependent Networks"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://rmg.mit.edu/pdep/">Pressure Dependent Networks</a></div>
        <div class="linkdesc">CanTherm pdep calculations</div>
</td></tr>

<tr><td>
        <a href="http://rmg.mit.edu/simulate/"><img src="../../_static/tools-icon.png" class="icon_sidebar" width="32px" alt="Simulation & Tools"/></a>
</td>
<td>
        <div class="biglink_sidebar"><a href="http://rmg.mit.edu/simulate/">Simulation & Tools</a></div>
        <div class="linkdesc">Additional tools to supplement RMG</div>
</td></tr>

</table>

</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2002-2015, William H. Green, Richard H. West, and the RMG Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>