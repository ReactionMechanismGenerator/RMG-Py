
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>4. Creating Input Files &#8212; RMG-Py 3.3.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5. Example Input Files" href="examples.html" />
    <link rel="prev" title="3.5.1. Dependencies" href="installation/dependencies.html" />
<script type="text/x-mathjax-config">
MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
  MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
    ce: ["Extension","mhchem"],
  });
});
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="5. Example Input Files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation/dependencies.html" title="3.5.1. Dependencies"
             accesskey="P">previous</a> |</li>
  <li><a href="https://rmg.mit.edu/">RMG</a> &raquo;</li>
  <li><a href="../../index.html">3.3.0 Documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >User’s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">RMG User’s Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4. </span>Creating Input Files</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="creating-input-files">
<span id="input"></span><h1><span class="section-number">4. </span>Creating Input Files<a class="headerlink" href="#creating-input-files" title="Permalink to this heading">¶</a></h1>
<p>The syntax and parameters within an RMG input file are explained below.  We recommend
trying to build your first input file while referencing one of the
<a class="reference internal" href="examples.html#examples"><span class="std std-ref">Example Input Files</span></a>.</p>
<section id="syntax">
<h2><span class="section-number">4.1. </span>Syntax<a class="headerlink" href="#syntax" title="Permalink to this heading">¶</a></h2>
<p>The format of RMG-Py <code class="file docutils literal notranslate"><span class="pre">input.py</span></code> is based on Python syntax.</p>
<p>Each section is made up of one or more function calls, where parameters are
specified as text strings, numbers, or objects. Text strings must be wrapped in
either single or double quotes.</p>
</section>
<section id="datasources">
<h2><span class="section-number">4.2. </span>Datasources<a class="headerlink" href="#datasources" title="Permalink to this heading">¶</a></h2>
<p>This section explains how to specify various reaction and thermo data sources in the input file.</p>
<section id="thermo-libraries">
<span id="thermolibraries"></span><h3><span class="section-number">4.2.1. </span>Thermo Libraries<a class="headerlink" href="#thermo-libraries" title="Permalink to this heading">¶</a></h3>
<p>By default, RMG will calculate the thermodynamic properties of the species from
Benson additivity formulas. In general, the group-additivity results are
suitably accurate. However, if you would like to override the default settings,
you may specify the thermodynamic properties of species in the
ThermoLibrary. When a species is specified in the ThermoLibrary,
RMG will automatically use those thermodynamic properties instead of generating
them from Benson’s formulas. Multiple libraries may be created, if so desired.
The order in which the thermo libraries are specified is important:
If a species appears in multiple thermo libraries, the first instance will
be used.</p>
<p>Now in RMG, you have two types of thermo libraries: gas and liquid thermo libraries. As species thermo in liquid phase depends on the solvent,
those libraries can only be used in liquid phase simulation with the corresponding solvent. Gas phase thermo library can be used either in gas phase simulation or
in liquid phase simulation. (see more details on the two <a class="reference internal" href="database/thermo.html#thermolibrarytype"><span class="std std-ref">thermo library types</span></a> and <a class="reference internal" href="liquids.html#useofthermolibrariesliquid"><span class="std std-ref">how to use thermo librairies in liquid phase simulation</span></a>)</p>
<p>Please see Section <a class="reference internal" href="database/thermo.html#thermodatabase"><span class="std std-ref">editing thermo database</span></a> for more details. In general, it is best to leave the ThermoLibrary
set to its default value.  In particular, the thermodynamic properties for H and H2
must be specified in one of the primary thermo libraries as they cannot be estimated
by Benson’s method.</p>
<p>For example, if you wish to use the GRI-Mech 3.0 mechanism <a class="reference internal" href="#grimech3-0" id="id1"><span>[GRIMech3.0]</span></a> as a ThermoLibrary in your model, the syntax will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">thermoLibraries</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;primaryThermoLibrary&#39;</span><span class="p">,</span> <span class="s1">&#39;GRI-Mech3.0&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div role="list" class="citation-list">
<div class="citation" id="grimech3-0" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">GRIMech3.0</a><span class="fn-bracket">]</span></span>
<p>Gregory P. Smith, David M. Golden, Michael Frenklach, Nigel W. Moriarty, Boris Eiteneer, Mikhail Goldenberg, C. Thomas Bowman, Ronald K. Hanson, Soonho Song, William C. Gardiner, Jr., Vitali V. Lissianski, and Zhiwei Qin <a class="reference external" href="http://combustion.berkeley.edu/gri-mech/">http://combustion.berkeley.edu/gri-mech/</a></p>
</div>
</div>
<p>This library is located in the
<code class="file docutils literal notranslate"><span class="pre">$RMG/RMG-database/input/thermo/libraries</span></code> directory.  All “Locations” for the
ThermoLibrary field must be with respect to the <code class="file docutils literal notranslate"><span class="pre">$RMG/RMG-database/input/thermo/libraries</span></code>
directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Checks during the initialization are made to avoid users using “liquid thermo libraries” in gas phase simulations or using
“liquid phase libraries” obtained in another solvent than the one defined in the input file in liquid phase simulations.</p>
</div>
</section>
<section id="reaction-libraries">
<span id="reactionlibraries"></span><h3><span class="section-number">4.2.2. </span>Reaction Libraries<a class="headerlink" href="#reaction-libraries" title="Permalink to this heading">¶</a></h3>
<p>The next section of the <code class="file docutils literal notranslate"><span class="pre">input.py</span></code> file specifies which, if any,
Reaction Libraries should be used. When a reaction library is specified, RMG will first
use the reaction library to generate all the relevant reactions for the species
in the core before going through the reaction templates. Unlike the Seed Mechanism,
reactions present in a Reaction Library will not be included in the core automatically
from the start.</p>
<p>You can specify your own reaction library in the location section.
In the following example, the user has created
a reaction library with a few additional reactions specific to n-butane, and these reactions
are to be used in addition to the Glarborg C3 library:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reactionLibraries</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Glarborg/C3&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)],</span>
</pre></div>
</div>
<p>The keyword False/True permits user to append all unused reactions (= kept in the edge) from this library to the chemkin file.
True means those reactions will be appended. Using just the string inputs would lead to
a default value of <cite>False</cite>. In the previous example, this would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reactionLibraries</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Glarborg/C3&#39;</span><span class="p">],</span>
</pre></div>
</div>
<p>The reaction libraries are stored in <code class="file docutils literal notranslate"><span class="pre">$RMG-database/input/kinetics/libraries/</span></code>
and the <cite>Location:</cite> should be specified relative to this path.</p>
<p>Because the units for the Arrhenius parameters are
given in each mechanism, the different mechanisms can have different units.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While using a Reaction Library the user must be careful enough to provide
all instances of a particular reaction in the library file, as RMG will
ignore all reactions generated by its templates.  For example, suppose you supply the
Reaction Library with butyl_1 –&gt; butyl_2.  Although RMG would find two unique
instances of this reaction (via a three- and four-member cyclic Transition State),
RMG would only use the rate coefficient supplied by you in generating the mechanism.</p>
<p>RMG will not handle irreversible reactions correctly, if supplied in a Reaction
Library.</p>
</div>
</section>
<section id="external-libraries">
<span id="externallib"></span><h3><span class="section-number">4.2.3. </span>External Libraries<a class="headerlink" href="#external-libraries" title="Permalink to this heading">¶</a></h3>
<p>Users may direct RMG to use thermo and/or kinetic libraries which are not included in the RMG database,
e.g., a library a user created that was intentionally saved to a path different than the conventional
RMG-database location. In such cases, the user can specify the full path to the library in the input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">thermoLibraries</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;path/to/your/thermo/library/file.py&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reactionLibraries</span> <span class="o">=</span> <span class="p">[(</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">kinetic</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="s1">&#39;]</span>
</pre></div>
</div>
<p>Combinations in any order of RMG’s legacy libraries and users’ external libraries are allowed,
and the order in which the libraries are specified is the order in which they are loaded and given priority.</p>
</section>
<section id="seed-mechanisms">
<span id="seedmechanism"></span><h3><span class="section-number">4.2.4. </span>Seed Mechanisms<a class="headerlink" href="#seed-mechanisms" title="Permalink to this heading">¶</a></h3>
<p>The next section of the <code class="file docutils literal notranslate"><span class="pre">input.py</span></code> file specifies which, if any,
Seed Mechanisms should be used.  If a seed mechanism is passed to RMG, every
species and reaction present in the seed mechanism will be placed into the core, in
addition to the species that are listed in the <a class="reference internal" href="#species-list"><span class="std std-ref">List of species</span></a> section.</p>
<p>For details of the kinetics libraries included with RMG that can be used as a seed mechanism,
see <a class="reference internal" href="#reactionlibraries"><span class="std std-ref">Reaction Libraries</span></a>.</p>
<p>You can specify your own
seed mechanism in the location section. Please note that the oxidation
library should not be used for pyrolysis models. The syntax for the seed mechanisms
is similar to that of the primary reaction libraries.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seedMechanisms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GRI-Mech3.0&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The seed mechanisms are stored in <code class="file docutils literal notranslate"><span class="pre">RMG-database/input/kinetics/libraries/</span></code></p>
<p>As the units for the Arrhenius parameters are given in each mechanism,
different mechanisms can have different units. Additionally, if the same
reaction occurs more than once in the combined mechanism,
the instance of it from the first mechanism in which it appears is
the one that gets used.</p>
</section>
<section id="kinetics-depositories">
<span id="kineticsdepositories"></span><h3><span class="section-number">4.2.5. </span>Kinetics Depositories<a class="headerlink" href="#kinetics-depositories" title="Permalink to this heading">¶</a></h3>
<p>Kinetics depositories store reactions which can be used for rate estimation.
Depositories are divided by the sources of the data. Currently, RMG database
has two depositories. The main depository is <cite>training</cite> which contains
reactions from various sources. This depository is loaded by default and
can be disabled by adding <cite>‘!training’</cite> to the list of depositories.
The <cite>NIST</cite> depository contains reactions taken from NIST’s gas kinetics database.
The <cite>kineticsDepositories</cite> argument in the input file accepts a list of
strings describing which depositories to include.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kineticsDepositories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;training&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="kinetics-families">
<span id="kineticsfamilies"></span><h3><span class="section-number">4.2.6. </span>Kinetics Families<a class="headerlink" href="#kinetics-families" title="Permalink to this heading">¶</a></h3>
<p>In this section users can specify the particular reaction families that they wish to use to generate their model.
This can be specified with any combination of specific families and predefined sets from <code class="file docutils literal notranslate"><span class="pre">RMG-database/input/kinetics/families/recommended.py</span></code>.</p>
<p>For example, you can use only the <code class="file docutils literal notranslate"><span class="pre">H_Abstraction</span></code> family to build the model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kineticsFamilies</span> <span class="o">=</span> <span class="s1">&#39;H_Abstraction&#39;</span>
</pre></div>
</div>
<p>You can also specify multiple families in a list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kineticsFamilies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;H_Abstraction&#39;</span><span class="p">,</span> <span class="s1">&#39;Disproportionation&#39;</span><span class="p">,</span> <span class="s1">&#39;R_Recombination&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To use a predefined set, simply specify its name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kineticsFamilies</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span>
</pre></div>
</div>
<p>You can use a mix of predefined sets and kinetics families:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kineticsFamilies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;SubstitutionS&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>It is also possible to request the inverse of a particular list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kineticsFamilies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;!default&#39;</span><span class="p">,</span> <span class="s1">&#39;!SubstitutionS&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This will load all kinetics families except the ones in <code class="docutils literal notranslate"><span class="pre">'default'</span></code> and <code class="docutils literal notranslate"><span class="pre">'SubstitutionS'</span></code>.</p>
<p>Finally, you can also specify <code class="docutils literal notranslate"><span class="pre">'all'</span></code> or <code class="docutils literal notranslate"><span class="pre">'none'</span></code>, which may be useful in certain cases.</p>
</section>
<section id="kinetics-estimator">
<h3><span class="section-number">4.2.7. </span>Kinetics Estimator<a class="headerlink" href="#kinetics-estimator" title="Permalink to this heading">¶</a></h3>
<p>The last section is specifying that RMG is estimating kinetics of reactions from rate rules. For more details on how kinetic estimations is working check <a class="reference internal" href="kinetics.html#kinetics"><span class="std std-ref">Kinetics Estimation</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kineticsEstimator</span> <span class="o">=</span> <span class="s1">&#39;rate rules&#39;</span>
</pre></div>
</div>
<p>The following is an example of a database block, based on above chosen libraries and options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">database</span><span class="p">(</span>
        <span class="n">thermoLibraries</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;primaryThermoLibrary&#39;</span><span class="p">,</span> <span class="s1">&#39;GRI-Mech3.0&#39;</span><span class="p">],</span>
        <span class="n">reactionLibraries</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Glarborg/C3&#39;</span><span class="p">,</span><span class="kc">False</span><span class="p">)],</span>
        <span class="n">seedMechanisms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GRI-Mech3.0&#39;</span><span class="p">],</span>
        <span class="n">kineticsDepositories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;training&#39;</span><span class="p">],</span>
        <span class="n">kineticsFamilies</span> <span class="o">=</span> <span class="s1">&#39;defult&#39;</span><span class="p">,</span>
        <span class="n">kineticsEstimator</span> <span class="o">=</span> <span class="s1">&#39;rate rules&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="list-of-species">
<span id="species-list"></span><h2><span class="section-number">4.3. </span>List of species<a class="headerlink" href="#list-of-species" title="Permalink to this heading">¶</a></h2>
<p>Species to be included in the core at the start of your RMG job are defined in the species block.
The label, reactive or inert, and structure of each reactant must be specified.</p>
<p>The label field will be used throughout your mechanism to identify the species.
Inert species in the model can be defined by setting reactive to be <code class="docutils literal notranslate"><span class="pre">False</span></code>. Reaction
families will no longer be applied to these species, but reactions of the inert from libraries
and seed mechanisms  will still be considered. For all other species the reactive status must
be set as <code class="docutils literal notranslate"><span class="pre">True</span></code>. The structure of the species can be defined using either by using SMILES or
<a class="reference internal" href="../../reference/molecule/adjlist.html#rmgpy-molecule-adjlist"><span class="std std-ref">adjacencyList</span></a>.</p>
<p>The following is an example of a typical species item, based on methane using SMILE or adjacency list to define the structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">species</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CH4&#39;</span><span class="p">,</span>
        <span class="n">reactive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">structure</span><span class="o">=</span><span class="n">SMILES</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">species</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CH4&#39;</span><span class="p">,</span>
        <span class="n">reactive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">structure</span><span class="o">=</span><span class="n">adjacencyList</span><span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                1 C 0</span>
<span class="sd">                &quot;&quot;&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="forbidden-structures">
<span id="id2"></span><h2><span class="section-number">4.4. </span>Forbidden Structures<a class="headerlink" href="#forbidden-structures" title="Permalink to this heading">¶</a></h2>
<p>RMG exlores a wide variety of structures as it builds a mechanism.
Sometimes, RMG makes nonsensical, unphysical, or unstable species that make their way into the core.</p>
<p>Luckily, RMG has a remedy to prevent these undesirable structures from making their way into your mechanism.
RMG’s ForbiddenStructures database contains structures that are forbidden from entering the core
(see <a class="reference internal" href="database/kinetics.html#kineticsdatabase"><span class="std std-ref">Kinetics Database</span></a> for more information)</p>
<p>While this database forbids many undesirable structures, it may not contain a species
or structure you would like to exclude from your model. If you would like to forbid a structure from your model,
you can do so by adding it to your input file in the forbidden block.</p>
<p>The label and structure of each forbidden structure must be specified.
The structure of the forbidden structure can be defined using either SMILES or
<a class="reference internal" href="../../reference/molecule/adjlist.html#rmgpy-molecule-adjlist"><span class="std std-ref">adjacencyList</span></a>.</p>
<p>The following is an example of a forbidden structure item, based on bidentate CO2 using SMILES or adjacency list to define the structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">forbidden</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CO2_bidentate&#39;</span><span class="p">,</span>
        <span class="n">structure</span><span class="o">=</span><span class="n">SMILES</span><span class="p">(</span><span class="s2">&quot;O=C(*)O*&quot;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">forbidden</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s1">&#39;CO2_bidentate&#39;</span><span class="p">,</span>
        <span class="n">structure</span><span class="o">=</span><span class="n">adjacencyList</span><span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                1 O u0 p2 c0 {2,D}</span>
<span class="sd">                2 C u0 p0 c0 {1,D} {3,S} {4,S}</span>
<span class="sd">                3 X u0 p0 c0 {2,S}</span>
<span class="sd">                4 O u0 p2 c0 {2,S} {5,S}</span>
<span class="sd">                5 X u0 p0 c0 {4,S}</span>
<span class="sd">                &quot;&quot;&quot;</span>
        <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If you would like to forbid a functional group from your mechanism, use the <code class="docutils literal notranslate"><span class="pre">adjacencyListGroup</span></code> syntax in the forbidden block.</p>
<p>The following is an example of a forbidden structure using <code class="docutils literal notranslate"><span class="pre">adjacencyListGroup</span></code>.
The <code class="docutils literal notranslate"><span class="pre">R-O-Cl</span></code> forbidden structure forbids any species which contain an “R-O-Cl” group from your mechanism.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">forbidden</span><span class="p">(</span>
        <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;R-O-Cl,</span>
        <span class="n">structure</span><span class="o">=</span><span class="n">adjacencyListGroup</span><span class="p">(</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                1 R  ux {2,S}</span>
<span class="sd">                2 O  ux {1,S} {3,S}</span>
<span class="sd">                3 Cl ux {2,S}</span>
<span class="sd">                &quot;&quot;&quot;</span>
        <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note: If you would like to allow Hypochlorous acid (<cite>ClOH</cite>) in your model and forbid any other species with an “R-O-Cl” group,
you can do so by changing the <cite>R</cite> atomtype to <cite>R!H</cite> in the <code class="docutils literal notranslate"><span class="pre">R-O-Cl</span></code> forbidden structure above.
Alternatively, you could explicitly allow <cite>ClOH</cite> by creating a <cite>ClOH</cite> species in your input file (see <a class="reference internal" href="#species-list"><span class="std std-ref">List of species</span></a>) and add “input species”
to the <cite>generatedSpeciesConstraints</cite> block discussed here <a class="reference internal" href="#miscellaneousoptions"><span class="std std-ref">Miscellaneous Options</span></a>.</p>
</section>
<section id="reaction-system">
<span id="reactionsystem"></span><h2><span class="section-number">4.5. </span>Reaction System<a class="headerlink" href="#reaction-system" title="Permalink to this heading">¶</a></h2>
<p>Every reaction system we want the model to be generated at must be defined individually.
Currently, RMG can only model constant temperature and pressure systems. Future versions
will allow for variable temperature and pressure. To define a reaction system we need to
define the temperature, pressure and initial mole fractions of the reactant species. The
initial mole fractions are defined using the label for the species in
the species block. Reaction system simulations terminate when one of the specified termination
criteria are satisfied.  Termination can be specied to occur at a specific time, at a specific
conversion of a given initial species or to occur at a given terminationRateRatio, which is the
characteristic flux in the system at that time divided by the maximum characteristic flux observed so far
in the system (measure of how much chemistry is happening at a moment relative to the main chemical process).</p>
<p>The following is an example of a simple reactor system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simpleReactor</span><span class="p">(</span>
        <span class="n">temperature</span><span class="o">=</span><span class="p">(</span><span class="mi">1350</span><span class="p">,</span><span class="s1">&#39;K&#39;</span><span class="p">),</span>
        <span class="n">pressure</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="s1">&#39;bar&#39;</span><span class="p">),</span>
        <span class="n">initialMoleFractions</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;CH4&quot;</span><span class="p">:</span> <span class="mf">0.104</span><span class="p">,</span>
                <span class="s2">&quot;H2&quot;</span><span class="p">:</span> <span class="mf">0.0156</span><span class="p">,</span>
                <span class="s2">&quot;N2&quot;</span><span class="p">:</span> <span class="mf">0.8797</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">terminationConversion</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;CH4&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">terminationTime</span><span class="o">=</span><span class="p">(</span><span class="mf">1e0</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">),</span>
        <span class="n">terminationRateRatio</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">sensitivity</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;CH4&#39;</span><span class="p">,</span><span class="s1">&#39;H2&#39;</span><span class="p">],</span>
        <span class="n">sensitivityThreshold</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>

<span class="p">)</span>
</pre></div>
</div>
<p>Troubleshooting tip: if you are using a goal conversion rather than time, the reaction systems may reach equilibrium below the goal conversion, leading
to a job that cannot converge physically.  Therefore it is may be necessary to reduce the goal conversion or set a goal reaction time.</p>
<p>For sensitivity analysis, RMG-Py must be compiled with the DASPK solver, which is done by default but has
some dependency restrictions. (See <a class="reference internal" href="installation/dependencies.html#dependenciesrestrictions"><span class="std std-ref">License Restrictions on Dependencies</span></a> for more details.)
The sensitivity and sensitivityThrehold are optional arguments for when the
user would like to conduct sensitivity analysis with respect to the reaction rate
coefficients for the list of species given for <code class="docutils literal notranslate"><span class="pre">sensitivity</span></code>.</p>
<p>Sensitivity analysis is conducted for the list of species given for <code class="docutils literal notranslate"><span class="pre">sensitivity</span></code> argument in the input file.
The normalized concentration sensitivities with respect to the reaction rate coefficients dln(C_i)/dln(k_j) are saved to a csv file
with the file name <code class="docutils literal notranslate"><span class="pre">sensitivity_1_SPC_1.csv</span></code> with the first index value indicating the reactor system and the second naming the index of the species
the sensitivity analysis is conducted for.  Sensitivities to thermo of individual species is also saved as semi normalized sensitivities
dln(C_i)/d(G_j) where the units are given in 1/(kcal mol-1). The sensitivityThreshold is set to some value so that only
sensitivities for dln(C_i)/dln(k_j) &gt; sensitivityThreshold  or dlnC_i/d(G_j) &gt; sensitivityThreshold are saved to this file.</p>
<p>Note that in the RMG job, after the model has been generated to completion, sensitivity analysis will be conducted
in one final simulation (sensitivity is not performed in intermediate iterations of the job).</p>
<section id="advanced-setting-range-based-reactors">
<h3><span class="section-number">4.5.1. </span>Advanced Setting: Range Based Reactors<a class="headerlink" href="#advanced-setting-range-based-reactors" title="Permalink to this heading">¶</a></h3>
<p>Under this setting rather than using reactors at fixed points, reaction conditions are sampled from a range of conditions.
Conditions are chosen using a weighted stochastic grid sampling algorithm.  An implemented objective function measures how
desirable it is to sample from a point condition (T, P, concentrations) based on prior run conditions (weighted by how
recent they were and how many objects they returned). Each iteration this objective function is evaluated at a grid of
points spaning the reactor range (the grid has 20^N points where N is the number of dimensions).  The grid values are then normalized to one and a grid point is chosen with probability
equal to its normalized objective function value.  Then a random step of maximum length sqrt(2)/2 times the distance between grid
points is taken from that grid point to give the chosen condition point.  The random numbers are seeded so that this does
not make the algorithm non-deterministic.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/RangedReactorDiagram.png"><img alt="../../_images/RangedReactorDiagram.png" src="../../_images/RangedReactorDiagram.png" style="width: 300px; height: 300px;" /></a>
</figure>
<p>These variable condition reactors run a defined number of times (<code class="docutils literal notranslate"><span class="pre">nSims</span></code>) each reactor cycle. Use of these reactors tends to
improve treatment of reaction conditions that otherwise would be between reactors and reduce the number of simulations needed by
focusing on reaction conditions at which the model terminates earlier.  An example with sensitivity analysis at a specified reaction condition
is available below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simpleReactor</span><span class="p">(</span>
        <span class="n">temperature</span><span class="o">=</span><span class="p">[(</span><span class="mi">1000</span><span class="p">,</span><span class="s1">&#39;K&#39;</span><span class="p">),(</span><span class="mi">1500</span><span class="p">,</span><span class="s1">&#39;K&#39;</span><span class="p">)],</span>
        <span class="n">pressure</span><span class="o">=</span><span class="p">[(</span><span class="mf">1.0</span><span class="p">,</span><span class="s1">&#39;bar&#39;</span><span class="p">),(</span><span class="mf">10.0</span><span class="p">,</span><span class="s1">&#39;bar&#39;</span><span class="p">)],</span>
        <span class="n">nSims</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
        <span class="n">initialMoleFractions</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;ethane&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.15</span><span class="p">],</span>
        <span class="s2">&quot;O2&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="s2">&quot;N2&quot;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">terminationConversion</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;ethane&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">terminationTime</span><span class="o">=</span><span class="p">(</span><span class="mf">1e1</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">),</span>
        <span class="n">sensitivityTemperature</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="s1">&#39;K&#39;</span><span class="p">),</span>
        <span class="n">sensitivityPressure</span> <span class="o">=</span> <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span><span class="s1">&#39;bar&#39;</span><span class="p">),</span>
        <span class="n">sensitivityMoleFractions</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ethane&quot;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span><span class="s2">&quot;O2&quot;</span><span class="p">:</span><span class="mf">0.9</span><span class="p">},</span>
        <span class="n">sensitivity</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ethane&quot;</span><span class="p">,</span><span class="s2">&quot;O2&quot;</span><span class="p">],</span>
        <span class="n">sensitivityThreshold</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
        <span class="n">balanceSpecies</span> <span class="o">=</span> <span class="s2">&quot;N2&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>Note that increasing <code class="docutils literal notranslate"><span class="pre">nSims</span></code> improves convergence over the entire range, but convergence is only guaranteed at the
last set of <code class="docutils literal notranslate"><span class="pre">nSims</span></code> reaction conditions. Theoretically if <code class="docutils literal notranslate"><span class="pre">nSims</span></code> is set high enough the RMG model converges over the
entire interval.  Except at very small values for <code class="docutils literal notranslate"><span class="pre">nSims</span></code> the convergence achieved is usually as good or superior to
that achieved using the same number of evenly spaced fixed reactors.</p>
<p>If there is a particular reaction condition you expect to converge more slowly than the rest of the range
there is virtually no cost to using a single condition reactor (or a ranged reactor at a smaller range) at that condition
and a ranged reactor with a smaller value for nSims.  This is because the fixed reactor simulations will almost always
be useful and keep the overall RMG job from terminating while the ranged reactor samples the faster converging conditions.</p>
<p>What you should actually set <code class="docutils literal notranslate"><span class="pre">nSims</span></code> to is very system dependent.  The value you choose should be at least 2 + N
where N is the number of dimensions the reactor spans (T=&gt;N=1, T and P=&gt;N=2, etc…).  There may be benefits to setting it as high
as 2 + 5N.  The first should give you convergence over most of the interval that is almost always better than the same
number of fixed reactors.  The second should get you reasonably close to convergence over the entire range for N &lt;= 2.</p>
<p>For gas phase reactors if normalization of the ranged mole fractions is undesirable (eg. perhaps a specific species mole
fractions needs to be kept constant) one can use a <code class="docutils literal notranslate"><span class="pre">balanceSpecies</span></code>.  When a <code class="docutils literal notranslate"><span class="pre">balanceSpecies</span></code> is used instead of
normalizing the mole fractions the concentration of the defined <code class="docutils literal notranslate"><span class="pre">balanceSpecies</span></code> is adjusted to maintain an overall mole
fraction of one.  This ensures that all species except the <code class="docutils literal notranslate"><span class="pre">balanceSpecies</span></code> have mole fractions within the range specified.</p>
</section>
</section>
<section id="simulator-tolerances">
<span id="simulatortolerances"></span><h2><span class="section-number">4.6. </span>Simulator Tolerances<a class="headerlink" href="#simulator-tolerances" title="Permalink to this heading">¶</a></h2>
<p>The next two lines specify the absolute and relative tolerance for the ODE solver, respectively. Common values for the absolute tolerance are 1e-15 to 1e-25. Relative tolerance is usually 1e-4 to 1e-8:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="p">(</span>
    <span class="n">atol</span><span class="o">=</span><span class="mf">1e-16</span><span class="p">,</span>
    <span class="n">rtol</span><span class="o">=</span><span class="mf">1e-8</span><span class="p">,</span>
    <span class="n">sens_atol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span>
    <span class="n">sens_rtol</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sens_atol</span></code> and <code class="docutils literal notranslate"><span class="pre">sens_rtol</span></code> are optional arguments for the sensitivity absolute tolerance and sensitivity relative tolerances, respectively.  They
are set to a default value of 1e-6 and 1e-4 respectively unless the user specifies otherwise.  They do not apply when sensitivity analysis is not conducted.</p>
</section>
<section id="model-tolerances">
<span id="modeltolerances"></span><h2><span class="section-number">4.7. </span>Model Tolerances<a class="headerlink" href="#model-tolerances" title="Permalink to this heading">¶</a></h2>
<p>Model tolerances dictate how species get included in the model. For more information, see the theory behind how RMG builds models using the <a class="reference internal" href="../../theory/rmg/enlarger.html#ratebasedmodelenlarger"><span class="std std-ref">Flux-based Algorithm</span></a>.
For running an initial job, it is recommended to only change the <code class="docutils literal notranslate"><span class="pre">toleranceMoveToCore</span></code> and <code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code> values to an equivalent desired value.  We find
that typically a value between <code class="docutils literal notranslate"><span class="pre">0.01</span></code> and <code class="docutils literal notranslate"><span class="pre">0.05</span></code> is best.  If your model cannot converge within a few hours, more advanced settings such as <a class="reference internal" href="#filterreactions"><span class="std std-ref">reaction filtering</span></a>
or <a class="reference internal" href="#pruning"><span class="std std-ref">pruning</span></a> can be turned on to speed up your simulation at a slight risk of omitting chemistry.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>            <span class="n">model</span><span class="p">(</span>
    <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">toleranceInterruptSimulation</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">toleranceMoveToCore</span></code> indicates how high the edge flux ratio for a species must get to enter the core model. This tolerance is designed for controlling the accuracy of final model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code> indicates how high the edge flux ratio must get to interrupt the simulation (before reaching the <code class="docutils literal notranslate"><span class="pre">terminationConversion</span></code> or <code class="docutils literal notranslate"><span class="pre">terminationTime</span></code>).  This value should be set to be equal to <code class="docutils literal notranslate"><span class="pre">toleranceMoveToCore</span></code> unless the advanced <a class="reference internal" href="#pruning"><span class="std std-ref">pruning</span></a> feature is desired.</p></li>
</ul>
<section id="advanced-setting-branching-criterion">
<h3><span class="section-number">4.7.1. </span>Advanced Setting:  Branching Criterion<a class="headerlink" href="#advanced-setting-branching-criterion" title="Permalink to this heading">¶</a></h3>
<p>The flux criterion works very well for identifying new species that have high flux
and therefore pathways that have high throughput flux. However, there are many important
low flux pathways particularly those that result in net production of radicals such as chain branching reactions in combustion.
Picking up these pathways with the flux criterion is difficult and almost always requires an appreciably lower
flux tolerance that would otherwise be necessary causing RMG to pickup many unimportant species. The
Branching criterion identifies important edge reactions based on the impact they are expected to
have on the concentrations of core species. The branching specific tolerances shown in the example below
are the recommended tolerances. These tolerances are much less system dependent than the flux tolerance and
the recommended values are usually sufficient.</p>
<p>For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
                <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                <span class="n">toleranceBranchReactionToCore</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
          <span class="n">branchingIndex</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
          <span class="n">branchingRatioMax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="advanced-setting-deadend-radical-elimination-rms-reactors-only">
<h3><span class="section-number">4.7.2. </span>Advanced Setting: Deadend Radical Elimination (RMS Reactors only)<a class="headerlink" href="#advanced-setting-deadend-radical-elimination-rms-reactors-only" title="Permalink to this heading">¶</a></h3>
<p>When generating mechanisms involving significant molecular growth (such as in polymerization),
there are many possible radicals, so fast propagation pathways compete with very slow termination and chain transfer reactions.
These slow reactions individually usually have a negligible impact on the model, and thus will not be picked up by the flux or branching criteria.
However, together they can have a very significant impact on the overall radical concentration, and need to be included in the generated mechanism.
The deadend radical elimination algorithm identifies important chain transfer and termination reactions in the edge, based on their flux ratio with radical consumption and termination reactions in the core.</p>
<p>For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
                <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                <span class="n">toleranceReactionToCoreDeadendRadical</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="advanced-setting-radical-flux-criterion-rms-reactors-only">
<h3><span class="section-number">4.7.3. </span>Advanced Setting:  Radical Flux Criterion (RMS Reactors Only)<a class="headerlink" href="#advanced-setting-radical-flux-criterion-rms-reactors-only" title="Permalink to this heading">¶</a></h3>
<p>At high radical concentrations important products can accumulate from termination reactions. In these cases
the flux and branching criteria can have difficulty adding in all of the important throughput terminations.
For this case we have added a radical specific flux criterion. This criterion is similar to the flux criterion except
that it looks at the net radical flux produced by each edge reaction instead of the total flux to each edge species.</p>
<p>For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
                <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                <span class="n">toleranceRadMoveToCore</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="advanced-setting-transitory-edge-analysis-rms-reactors-only">
<h3><span class="section-number">4.7.4. </span>Advanced Setting:  Transitory Edge Analysis (RMS Reactors Only)<a class="headerlink" href="#advanced-setting-transitory-edge-analysis-rms-reactors-only" title="Permalink to this heading">¶</a></h3>
<p>Suppose you are interested in the chemistry of a particular chemical species in your system. If
that species is not high flux or participates in important branching reactions it may not be resolved accurately
with the flux and branching criteria. Transitory edge analysis applies transitory sensitivity analysis to the edge of the mechanism to
generate much more sophisticated information than the flux and branching algorithms can provide. This can be used to identify how edge reactions
are likely to affect the concentrations of non-participant core species. By applying this analysis to a given target species
we can add all edge reactions that the target species is sensitive to above a given tolerance. This criterion is highly effective, but
it can also be very computationally expensive for models with large edges. One can reduce the computational cost
by increasing the <cite>transitoryStepPeriod</cite>, which is the number of solver time steps RMG takes between transitory edge analyses.
how</p>
<p>For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
                <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                <span class="n">toleranceTransitoryDict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;NO&quot;</span><span class="p">:</span><span class="mf">0.2</span><span class="p">},</span>
                <span class="n">transitoryStepPeriod</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="advanced-setting-speed-up-by-filtering-reactions">
<span id="filterreactions"></span><h3><span class="section-number">4.7.5. </span>Advanced Setting: Speed Up By Filtering Reactions<a class="headerlink" href="#advanced-setting-speed-up-by-filtering-reactions" title="Permalink to this heading">¶</a></h3>
<p>For generating models for larger molecules, RMG-Py may have trouble converging because it must find reactions on the order of
<span class="math notranslate nohighlight">\((n_{reaction\: sites})^{{n_{species}}}\)</span>.  Thus it can be further sped up by pre-filtering reactions that are
added to the model.  This modification to the algorithm does not react core species together
until their concentrations are deemed high enough.  It is recommended to turn on this flag when
the model does not converge with normal parameter settings.  See <a class="reference internal" href="../../theory/rmg/enlarger.html#filterreactionstheory"><span class="std std-ref">Filtering Reactions within the Flux-based Algorithm</span></a>. for more details.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
          <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
          <span class="n">toleranceInterruptSimulation</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
          <span class="n">filterReactions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
          <span class="n">filterThreshold</span><span class="o">=</span><span class="mf">5e8</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Additional parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filterReactions</span></code>: set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if reaction filtering is turned on. By default it is set to False.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filterThreshold</span></code>: click <a class="reference internal" href="../../theory/rmg/enlarger.html#filterreactionstheory"><span class="std std-ref">here</span></a> for more description about its effect. Default: <code class="docutils literal notranslate"><span class="pre">5e8</span></code></p></li>
</ul>
</section>
<section id="advanced-setting-speed-up-by-pruning">
<span id="pruning"></span><h3><span class="section-number">4.7.6. </span>Advanced Setting: Speed Up by Pruning<a class="headerlink" href="#advanced-setting-speed-up-by-pruning" title="Permalink to this heading">¶</a></h3>
<p>For further speed-up, it is also possible to perform mechanism generation with pruning of “unimportant” edge species to reduce memory usage.</p>
<p>A typical set of parameters for pruning is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
    <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">toleranceInterruptSimulation</span><span class="o">=</span><span class="mf">1e8</span><span class="p">,</span>
    <span class="n">toleranceKeepInEdge</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
    <span class="n">maximumEdgeSpecies</span><span class="o">=</span><span class="mi">200000</span><span class="p">,</span>
    <span class="n">minCoreSizeForPrune</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
    <span class="n">minSpeciesExistIterationsForPrune</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p><strong>Additional parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code> indicates how low the edge flux ratio for a species must be to keep on the edge.  This should be set to zero, which is its default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maximumEdgeSpecies</span></code> indicates the upper limit for the size of the edge. The default value is set to <code class="docutils literal notranslate"><span class="pre">1000000</span></code> species.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minCoreSizeForPrune</span></code> ensures that a minimum number of species are in the core before pruning occurs, in order to avoid pruning the model when it is far away from completeness.  The default value is set to 50 species.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minSpeciesExistIterationsForPrune</span></code> is set so that the edge species stays in the job for at least that many iterations before it can be pruned.  The default value is 2 iterations.</p></li>
</ul>
<p><strong>Recommendations:</strong></p>
<p>We recommend setting <code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code> to not be larger than 10% of <code class="docutils literal notranslate"><span class="pre">toleranceMoveToCore</span></code>, based on a pruning case study.
In order to always enable pruning, <code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code> should be set as a high value, e.g. 1e8.
<code class="docutils literal notranslate"><span class="pre">maximumEdgeSpecies</span></code> can be adjusted based on user’s RAM size. Usually 200000 edge species would cause memory shortage of 8GB computer,
setting <code class="docutils literal notranslate"><span class="pre">maximumEdgeSpecies</span> <span class="pre">=</span> <span class="pre">200000</span></code> (or lower values) could effectively prevent memory crash.</p>
<p><strong>Additional Notes:</strong></p>
<p>Note that when using pruning, RMG will not prune unless all reaction systems reach the goal reaction time or conversion without exceeding the <code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code>.
Therefore, you may find that RMG is not pruning even though the model edge size exceeds <code class="docutils literal notranslate"><span class="pre">maximumEdgeSpecies</span></code>, or an edge species has flux below the <code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code>. This is
a safety check within RMG to ensure that species are not pruned too early, resulting in inaccurate chemistry. In order to increase the likelihood of pruning you can
try increasing <code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code> to an arbitrarily high value.</p>
<p>As a contrast, a typical set of parameters for non-pruning is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
    <span class="n">toleranceKeepInEdge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">toleranceInterruptSimulation</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">toleranceKeepInEdge</span></code> is always 0, meaning all the edge species will be kept in edge since all the edge species have positive flux.
<code class="docutils literal notranslate"><span class="pre">toleranceInterruptSimulation</span></code> equals to <code class="docutils literal notranslate"><span class="pre">toleranceMoveToCore</span></code> so that ODE simulation get interrupted once discovering a new core species.
Because the ODE simulation is always interrupted, no pruning is performed.</p>
<p>Please find more details about the theory behind pruning at <a class="reference internal" href="../../theory/rmg/prune.html#prune"><span class="std std-ref">Pruning Theory</span></a>.</p>
</section>
<section id="advanced-setting-thermodynamic-pruning">
<h3><span class="section-number">4.7.7. </span>Advanced Setting: Thermodynamic Pruning<a class="headerlink" href="#advanced-setting-thermodynamic-pruning" title="Permalink to this heading">¶</a></h3>
<p>Thermodynamic pruning is an alternative to flux pruning that does not require a given
simulation to complete to remove excess species.  The thermodynamic criteria is
calculated by determining the minimum and maximum Gibbs energies of formation (Gmin and Gmax)
among species in the core.  If the Gibbs energy of formation of a given species is G
the value of the criteria is (G-Gmax)/(Gmax-Gmin).  All of the Gibbs energies are evaluated
at the highest temperature used in all of the reactor systems.  This means that a value of 0.2
for the criterion implies that it will not add species that have Gibbs energies of formation
greater than 20% of the core Gibbs energy range greater than the maximum Gibbs energy of
formation within the core.</p>
<p>For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
    <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">toleranceInterruptSimulation</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">toleranceThermoKeepSpeciesInEdge</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">maximumEdgeSpecies</span><span class="o">=</span><span class="mi">200000</span><span class="p">,</span>
    <span class="n">minCoreSizeForPrune</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p><strong>Advantages over flux pruning</strong>:</p>
<p>Species are removed immediately if they violate tolerance
Completing a simulation is unnecessary for this pruning so there is no need
to waste time setting the interrupt tolerance higher than the movement tolerance.
Will always maintain the correct <code class="docutils literal notranslate"><span class="pre">maximumEdgeSpecies</span></code>.</p>
<p><strong>Primary disadvantage</strong>:</p>
<p>Since we determine whether to add species primarily based on flux, at tight tolerances
this is more likely to kick out species RMG might otherwise have added to core.</p>
</section>
<section id="advanced-setting-taking-multiple-species-at-a-time">
<h3><span class="section-number">4.7.8. </span>Advanced Setting: Taking Multiple Species At A Time<a class="headerlink" href="#advanced-setting-taking-multiple-species-at-a-time" title="Permalink to this heading">¶</a></h3>
<p>Taking multiple objects (<code class="docutils literal notranslate"><span class="pre">Species</span></code>, <code class="docutils literal notranslate"><span class="pre">Reaction</span></code> or <code class="docutils literal notranslate"><span class="pre">PDepNetwork</span></code>) during a given simulation can often decrease your overall model generation time
over only taking one.  For this purpose there is a <code class="docutils literal notranslate"><span class="pre">maxNumObjsPerIter</span></code> parameter that allows RMG to take
that many <code class="docutils literal notranslate"><span class="pre">Species</span></code>, <code class="docutils literal notranslate"><span class="pre">Reaction</span></code> or <code class="docutils literal notranslate"><span class="pre">PDepNetwork</span></code> from a given simulation. This is done in the order they trigger their respective criteria.</p>
<p>You can also set <code class="docutils literal notranslate"><span class="pre">terminateAtMaxObjects=True</span></code> to cause it to terminate when it has the maximum
number of objects allowed rather than waiting around until it hits an interrupt tolerance.  This
avoids additional simulation time, but will also make it less likely to finish simulations, which can
affect flux pruning.</p>
<p>For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
        <span class="n">toleranceKeepInEdge</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="n">toleranceInterruptSimulation</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
        <span class="n">maxNumObjsPerIter</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">terminateAtMaxObjects</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that this can also result in larger models, however, sometimes these larger models (from taking more than one
object at a time) pick up chemistry that would otherwise have been missed.</p>
</section>
<section id="advanced-settings-other">
<h3><span class="section-number">4.7.9. </span>Advanced Settings: Other<a class="headerlink" href="#advanced-settings-other" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dynamicsTimeScale</span></code>: The time before which the dynamics criterion cannot be used to bring reactions into the model. This is useful because the math behind the dynamics criterion breaks down as <code class="docutils literal notranslate"><span class="pre">t</span></code> approaches 0, thus restricting the use of the dynamics criterion until later times may reduce the number of junk species/reactions added to the model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignoreOverallFluxCriterion</span></code>: Causes RMG to use the given flux criterion only for determining if a <code class="docutils literal notranslate"><span class="pre">PDepNetwork</span></code> should be explored and not whether species should enter the model. Lets you run pressure dependence alongside the dynamics criterion without the flux criterion.</p></li>
</ul>
</section>
</section>
<section id="on-the-fly-quantum-calculations">
<span id="ontheflyquantumcalculations"></span><h2><span class="section-number">4.8. </span>On the fly Quantum Calculations<a class="headerlink" href="#on-the-fly-quantum-calculations" title="Permalink to this heading">¶</a></h2>
<p>This block is used when quantum mechanical calculations are desired to determine thermodynamic parameters.
These calculations are only run if the molecule is not included in a specified thermo library.
The <code class="docutils literal notranslate"><span class="pre">onlyCyclics</span></code> option, if <code class="docutils literal notranslate"><span class="pre">True</span></code>, only runs these calculations for cyclic species.
In this case, group additive estimates are used for all other species.</p>
<p>Molecular geometries are estimated via RDKit <a class="reference internal" href="#rdkit" id="id3"><span>[RDKit]</span></a>.
Either MOPAC (2009 and 2012) or GAUSSIAN (2003 and 2009) can be used
with the semi-empirical pm3, pm6, and pm7 (pm7 only available in MOPAC2012),
specified in the software and method blocks.
A folder can be specified to store the files used in these calculations,
however if not specified this defaults to a <cite>QMfiles</cite> folder in the output folder.</p>
<p>The calculations are also only run on species with a maximum radical number set by the user.
If a molecule has a higher radical number, the molecule is saturated with hydrogen atoms, then
quantum mechanical calculations with subsequent hydrogen bond incrementation is used to determine the
thermodynamic parameters.</p>
<p>The following is an example of the quantum mechanics options</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">quantumMechanics</span><span class="p">(</span>
        <span class="n">software</span><span class="o">=</span><span class="s1">&#39;mopac&#39;</span><span class="p">,</span>
        <span class="n">method</span><span class="o">=</span><span class="s1">&#39;pm3&#39;</span><span class="p">,</span>
        <span class="n">fileStore</span><span class="o">=</span><span class="s1">&#39;QMfiles&#39;</span><span class="p">,</span>
        <span class="n">scratchDirectory</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">onlyCyclics</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">maxRadicalNumber</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>
</div>
<div role="list" class="citation-list">
<div class="citation" id="rdkit" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">RDKit</a><span class="fn-bracket">]</span></span>
<p>RDKit: Open-source cheminformatics; <a class="reference external" href="http://www.rdkit.org">http://www.rdkit.org</a></p>
</div>
</div>
</section>
<section id="machine-learning-based-thermo-estimation">
<span id="mlestimation"></span><h2><span class="section-number">4.9. </span>Machine Learning-based Thermo Estimation<a class="headerlink" href="#machine-learning-based-thermo-estimation" title="Permalink to this heading">¶</a></h2>
<p>This block is used to turn on the machine learning module to estimate thermodynamic parameters.
These calculations are only run if the molecule is not included in a specified thermo library.
There are a number of different settings that can be specified to tune the estimator so that it only tries to estimate
some species. This is useful because the machine learning model may perform poorly for some molecules and group
additivity may be more suitable. Using the machine learning estimator for fused cyclic species of moderate size or any
species with significant proportions of oxygen and/or nitrogen atoms will most likely yield better estimates than
group additivity.</p>
<p>The available options with their default values are</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mlEstimator</span><span class="p">(</span>
    <span class="n">thermo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;main&#39;</span><span class="p">,</span>
    <span class="n">minHeavyAtoms</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">maxHeavyAtoms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">minCarbonAtoms</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">maxCarbonAtoms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">minOxygenAtoms</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">maxOxygenAtoms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">minNitrogenAtoms</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">maxNitrogenAtoms</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">onlyCyclics</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">onlyHeterocyclics</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">minCycleOverlap</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">H298UncertaintyCutoff</span><span class="o">=</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="s1">&#39;kcal/mol&#39;</span><span class="p">),</span>
    <span class="n">S298UncertaintyCutoff</span><span class="o">=</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;cal/(mol*K)&#39;</span><span class="p">),</span>
    <span class="n">CpUncertaintyCutoff</span><span class="o">=</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;cal/(mol*K)&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> is the name of the folder containing the machine learning model architecture and parameters in the RMG
database. The next several options allow setting limits on the numbers of atoms. <code class="docutils literal notranslate"><span class="pre">onlyCyclics</span></code> means that only cyclic
species will be estimated. <code class="docutils literal notranslate"><span class="pre">onlyHeterocyclics</span></code> means that only heterocyclic species will be estimated. Note that
if <code class="docutils literal notranslate"><span class="pre">onlyHeterocyclics</span></code> setting is set to True, the machine learning estimator will be restricted to heterocyclic
species regardless of the <code class="docutils literal notranslate"><span class="pre">onlyCyclics</span></code> setting. If <code class="docutils literal notranslate"><span class="pre">onlyCyclics</span></code> is False and <code class="docutils literal notranslate"><span class="pre">onlyHeterocyclics</span></code> is True,
RMG will log a warning that <code class="docutils literal notranslate"><span class="pre">onlyCyclics</span></code> should also be True and the machine learning estimator will be
restricted to heterocyclic species because they are a subset of cyclics.
<code class="docutils literal notranslate"><span class="pre">minCycleOverlap</span></code> specifies the minimum number of atoms that must be shared between any two cycles. For example,
if there are only disparate monocycles or no cycles in a species, the overlap is zero; “spiro” cycles have an overlap
of one; “fused” cycles have an overlap of two; and “bridged” cycles have an overlap of at least three. Note that
specifying any value greater than zero will automatically restrict the machine learning estimator to only consider
cyclic species regardless of the <code class="docutils literal notranslate"><span class="pre">onlyCyclics</span></code> setting. If <code class="docutils literal notranslate"><span class="pre">onlyCyclics</span></code> is False and <code class="docutils literal notranslate"><span class="pre">minCycleOverlap</span></code> is greater
than zero, RMG will log a warning that <code class="docutils literal notranslate"><span class="pre">onlyCyclics</span></code> should also be True and the machine learning estimator will be
restricted to only cyclic species with the specified minimum cycle overlap.</p>
<p>Note that the current machine learning model is not yet capable of estimating uncertainty so the <code class="docutils literal notranslate"><span class="pre">UncertaintyCutoff</span></code>
values do not yet have any effect.</p>
</section>
<section id="pressure-dependence">
<span id="pressuredependence"></span><h2><span class="section-number">4.10. </span>Pressure Dependence<a class="headerlink" href="#pressure-dependence" title="Permalink to this heading">¶</a></h2>
<p>This block is used when the model should account for pressure
dependent rate coefficients. RMG can estimate pressure dependence kinetics based on <code class="docutils literal notranslate"><span class="pre">Modified</span> <span class="pre">Strong</span> <span class="pre">Collision</span></code> and <code class="docutils literal notranslate"><span class="pre">Reservoir</span> <span class="pre">State</span></code> methods.
The former utilizes the modified strong collision approach of Chang, Bozzelli, and Dean <a class="reference internal" href="#chang2000" id="id4"><span>[Chang2000]</span></a>,
and works reasonably well while running more rapidly. The latter
utilizes the steady-state/reservoir-state approach of Green and Bhatti <a class="reference internal" href="#green2007" id="id5"><span>[Green2007]</span></a>,
and is more theoretically sound but more expensive.</p>
<p>The following is an example of pressure dependence options</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pressureDependence</span><span class="p">(</span>
        <span class="n">method</span><span class="o">=</span><span class="s1">&#39;modified strong collision&#39;</span><span class="p">,</span>
        <span class="n">maximumGrainSize</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="s1">&#39;kcal/mol&#39;</span><span class="p">),</span>
        <span class="n">minimumNumberOfGrains</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
        <span class="n">temperatures</span><span class="o">=</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;K&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
        <span class="n">pressures</span><span class="o">=</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span>
        <span class="n">interpolation</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Chebyshev&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
        <span class="n">maximumAtoms</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The various options are as follows:</p>
<section id="method-used-for-estimating-pressure-dependent-kinetics">
<h3><span class="section-number">4.10.1. </span>Method used for estimating pressure dependent kinetics<a class="headerlink" href="#method-used-for-estimating-pressure-dependent-kinetics" title="Permalink to this heading">¶</a></h3>
<p>To specify the modified strong collision approach, this item should read</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;Modified Strong Collision&#39;</span>
</pre></div>
</div>
<p>To specify the reservoir state approach, this item should read</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;Reservoir State&#39;</span>
</pre></div>
</div>
<p>For more information on the two methods, consult the following resources :</p>
<div role="list" class="citation-list">
<div class="citation" id="chang2000" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">Chang2000</a><span class="fn-bracket">]</span></span>
<p>A.Y. Chang, J.W. Bozzelli, and A. M. Dean. “Kinetic Analysis of Complex Chemical Activation and Unimolecular Dissociation Reactions using QRRK Theory and the Modified Strong Collision Approximation.” <em>Z. Phys. Chem.</em> <strong>214</strong> (11), p. 1533-1568 (2000).</p>
</div>
<div class="citation" id="green2007" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">Green2007</a><span class="fn-bracket">]</span></span>
<p>N.J.B. Green and Z.A. Bhatti. “Steady-State Master Equation Methods.” <em>Phys. Chem. Chem. Phys.</em> <strong>9</strong>, p. 4275-4290 (2007).</p>
</div>
</div>
</section>
<section id="grain-size-and-minimum-number-of-grains">
<h3><span class="section-number">4.10.2. </span>Grain size and minimum number of grains<a class="headerlink" href="#grain-size-and-minimum-number-of-grains" title="Permalink to this heading">¶</a></h3>
<p>Since the <span class="math notranslate nohighlight">\(k(E)\)</span> requires discretization in the energy space, we need to specify the number of energy grains to use
when solving the Master Equation. The default value for the minimum number of grains is 250; this was selected to balance the speed
and accuracy of the Master Equation solver method.  However, for some pressure-dependent networks,
this number of energy grains will result in the pressure-dependent <span class="math notranslate nohighlight">\(k(T, P)\)</span> being greater than
the high-P limit</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">maximumGrainSize</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="s1">&#39;kcal/mol&#39;</span><span class="p">)</span>
<span class="n">minimumNumberOfGrains</span><span class="o">=</span><span class="mi">250</span>
</pre></div>
</div>
</section>
<section id="temperature-and-pressure-for-the-interpolation-scheme">
<h3><span class="section-number">4.10.3. </span>Temperature and pressure for the interpolation scheme<a class="headerlink" href="#temperature-and-pressure-for-the-interpolation-scheme" title="Permalink to this heading">¶</a></h3>
<p>To generate the <span class="math notranslate nohighlight">\(k(T,P)\)</span> interpolation model, a set of temperatures and pressures must be used. RMG can do this automatically, but it must be told a few parameters.
We need to specify the limits of the temperature and pressure for the fitting of the interpolation scheme and the number of points to be considered in between this limit.
For typical combustion model temperatures of the experiments range from 300 - 2000 K and pressure 1E-2 to 100 bar</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">temperatures</span><span class="o">=</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;K&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="n">pressures</span><span class="o">=</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="interpolation-scheme">
<h3><span class="section-number">4.10.4. </span>Interpolation scheme<a class="headerlink" href="#interpolation-scheme" title="Permalink to this heading">¶</a></h3>
<p>To use logarithmic interpolation of pressure and Arrhenius interpolation for temperature, use the
line</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">interpolation</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;PDepArrhenius&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<p>The auxillary information printed to the Chemkin chem.inp file will have the “PLOG”
format.  Refer to Section 3.5.3 of the <code class="file docutils literal notranslate"><span class="pre">CHEMKIN_Input.pdf</span></code> document and/or
Section 3.6.3 of the <code class="file docutils literal notranslate"><span class="pre">CHEMKIN_Theory.pdf</span></code> document.  These files are part of
the CHEMKIN manual.</p>
<p>To fit a set of Chebyshev polynomials on inverse temperature and logarithmic pressure axes mapped
to [-1,1], specify <cite>‘’Chebyshev’</cite> interpolation.
You should also specify the number of temperature and pressure basis functions by adding the appropriate integers.
For example, the following specifies that six basis functions in temperature and four in pressure should be used</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">interpolation</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Chebyshev&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The auxillary information printed to the Chemkin chem.inp file will have the “CHEB”
format.  Refer to Section 3.5.3 of the <code class="file docutils literal notranslate"><span class="pre">CHEMKIN_Input.pdf</span></code> document and/or
Section 3.6.4 of the <code class="file docutils literal notranslate"><span class="pre">CHEMKIN_Theory.pdf</span></code> document.</p>
<p>Regarding the number of polynomial coeffients for Chebyshev interpolated rates,
plese refer to the <a class="reference internal" href="../../reference/kinetics/chebyshev.html#rmgpy.kinetics.Chebyshev" title="rmgpy.kinetics.Chebyshev"><code class="xref py py-class docutils literal notranslate"><span class="pre">rmgpy.kinetics.Chebyshev</span></code></a> documentation.
The number of pressures and temperature coefficents should always be smaller
than the respective number of user-specified temperatures and pressures.</p>
</section>
<section id="maximum-size-of-adduct-for-which-pressure-dependence-kinetics-be-generated">
<h3><span class="section-number">4.10.5. </span>Maximum size of adduct for which pressure dependence kinetics be generated<a class="headerlink" href="#maximum-size-of-adduct-for-which-pressure-dependence-kinetics-be-generated" title="Permalink to this heading">¶</a></h3>
<p>By default pressure dependence is run for every system that might show pressure
dependence, i.e. every isomerization, dissociation, and association reaction.
In reality, larger molecules are less likely to exhibit pressure-dependent
behavior than smaller molecules due to the presence of more modes for
randomization of the internal energy. In certain cases involving very large
molecules, it makes sense to only consider pressure dependence for molecules
smaller than some user-defined number of atoms. This is specified e.g. using
the line</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">maximumAtoms</span><span class="o">=</span><span class="mi">16</span>
</pre></div>
</div>
<p>to turn off pressure dependence for all molecules larger than the given number
of atoms (16 in the above example).</p>
</section>
</section>
<section id="uncertainty-analysis">
<span id="uncertaintyanalysis"></span><h2><span class="section-number">4.11. </span>Uncertainty Analysis<a class="headerlink" href="#uncertainty-analysis" title="Permalink to this heading">¶</a></h2>
<p>It is possible to request automatic uncertainty analysis following the convergence of an RMG simulation by including
an uncertainty options block in the input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uncertainty</span><span class="p">(</span>
    <span class="n">localAnalysis</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">globalAnalysis</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">uncorrelated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">correlated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">localNumber</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">globalNumber</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">terminationTime</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">pceRunTime</span><span class="o">=</span><span class="mi">1800</span><span class="p">,</span>
    <span class="n">pceErrorTol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">pceMaxEvals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">logx</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<p>RMG can perform local uncertainty analysis using first-order sensitivity coefficients output by the native RMG solver.
This is enabled by setting <code class="docutils literal notranslate"><span class="pre">localAnalysis=True</span></code>. Performing local uncertainty analysis requires suitable settings in
the reactor block (see <a class="reference internal" href="#reactionsystem"><span class="std std-ref">Reaction System</span></a>). At minimum, the output species to perform sensitivity analysis on must
be specified, via the <code class="docutils literal notranslate"><span class="pre">sensitivity</span></code> argument. RMG will then perform local uncertainty analysis on the same species.
Species and reactions with the largest sensitivity indices will be reported in the log file and output figures.
The number of parameters reported can be adjusted using <code class="docutils literal notranslate"><span class="pre">localNumber</span></code>.</p>
<p>RMG can also perform global uncertainty analysis, implemented using Cantera <a class="reference internal" href="#cantera" id="id6"><span>[Cantera]</span></a> and the MIT Uncertainty
Quantification (MUQ) <a class="reference internal" href="#muq" id="id7"><span>[MUQ]</span></a> library. This is enabled by setting <code class="docutils literal notranslate"><span class="pre">globalAnalysis=True</span></code>. Note that local analysis
is a required prerequisite of running the global analysis (at least for this semi-automatic approach), so
<code class="docutils literal notranslate"><span class="pre">localAnalysis</span></code> will be enabled regardless of the input file setting. The analysis is performed by allowing the
input parameters with the largest sensitivity indices (as determined from the local uncertainty analysis) to vary
while performing reactor simulations using Cantera. MUQ is used to fit a Polynomial Chaos Expansion (PCE) to the
resulting output surface. The number of input parameters chosen can be adjusted using <code class="docutils literal notranslate"><span class="pre">globalNumber</span></code>.
Note that this number applies independently to thermo and rate parameters and output species.
For example <code class="docutils literal notranslate"><span class="pre">globalNumber=5</span></code> for analysis on a single output species will result in 10 parameters being varied, while
having two output species could result in up to 20 parameters being varied, assuming no overlap in the sensitive input
parameters for each output.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">uncorrelated</span></code> and <code class="docutils literal notranslate"><span class="pre">correlated</span></code> options refer to two approaches for uncertainty analysis. Uncorrelated means
that all input parameters are considered to be independent, each with their own uncertainty bounds. Thus, the output
uncertainty distribution is determined on the basis that every input parameter could vary within the full range of
its uncertainty bounds. Correlated means that inherent relationships between parameters (such as rate rules for kinetics
or group additivity values for thermochemistry) are accounted for, which reduces the uncertainty space of the input
parameters.</p>
<p>Finally, there are a few miscellaneous options for global uncertainty analysis. The <code class="docutils literal notranslate"><span class="pre">terminationTime</span></code> applies for the
reactor simulation. It is only necessary if termination time is not specified in the reactor settings (i.e. only other
termination criteria are used). For PCE generation, there are three termination options: <code class="docutils literal notranslate"><span class="pre">pceRunTime</span></code> sets a time
limit for adapting the PCE to the output, <code class="docutils literal notranslate"><span class="pre">pceErrorTol</span></code> sets the target L2 error between the PCE model and the true
output, and <code class="docutils literal notranslate"><span class="pre">pceMaxEvals</span></code> sets a limit on the total number of model evaluations used to adapt the PCE.
Longer run time, smaller error tolerance, and more model evaluations all contribute to more accurate results at the
expense of computation time. The <code class="docutils literal notranslate"><span class="pre">logx</span></code> option toggles the output parameter space between mole fractions and log mole
fractions. Results in mole fraction space are more physically meaningful, while results in log mole fraction space can
be directly compared against local uncertainty results.</p>
<p><strong>Important Note:</strong> The current implementation of uncertainty analysis assigns values for input parameter
uncertainties based on the estimation method used by RMG. Actual uncertainties associated with the original data sources
are not used. Thus, the output uncertainties reported by these analyses should be viewed with this in mind.</p>
<p>The uncertainty analysis is described in <a class="reference internal" href="#gao2016thesis" id="id8"><span>[Gao2016thesis]</span></a> and <a class="reference internal" href="#gao2020" id="id9"><span>[Gao2020]</span></a>.</p>
<div role="list" class="citation-list">
<div class="citation" id="cantera" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">Cantera</a><span class="fn-bracket">]</span></span>
<p>Goodwin, D.G.; Moffat, H.K.; Speth, R.L. Cantera: An object-oriented software toolkit for
chemical kinetics, thermodynamics, and transport processes; <a class="reference external" href="https://www.cantera.org/">https://www.cantera.org/</a></p>
</div>
<div class="citation" id="muq" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">MUQ</a><span class="fn-bracket">]</span></span>
<p>Conrad, P.R.; Parno, M.D.; Davis, A.D.; Marzouk, Y.M. MIT Uncertainty Quantification Library (MUQ); <a class="reference external" href="http://muq.mit.edu/">http://muq.mit.edu/</a></p>
</div>
<div class="citation" id="gao2016thesis" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">Gao2016thesis</a><span class="fn-bracket">]</span></span>
<p>Gao, C. W.; Ph.D. Thesis. 2016.</p>
</div>
<div class="citation" id="gao2020" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">Gao2020</a><span class="fn-bracket">]</span></span>
<p>Gao, CW; Liu, M; Green, WH. Uncertainty analysis of correlated parameters in automated reaction mechanism generation.
Int J Chem Kinet. 2020; 52: 266– 282. <a class="reference external" href="https://doi.org/10.1002/kin.21348">https://doi.org/10.1002/kin.21348</a></p>
</div>
</div>
</section>
<section id="miscellaneous-options">
<span id="miscellaneousoptions"></span><h2><span class="section-number">4.12. </span>Miscellaneous Options<a class="headerlink" href="#miscellaneous-options" title="Permalink to this heading">¶</a></h2>
<p>Miscellaneous options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">options</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Seed&#39;</span><span class="p">,</span>
    <span class="n">generateSeedEachIteration</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">saveSeedToDatabase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">units</span><span class="o">=</span><span class="s1">&#39;si&#39;</span><span class="p">,</span>
    <span class="n">generateOutputHTML</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">generatePlots</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">generatePESDiagrams</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">saveSimulationProfiles</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">verboseComments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">saveEdgeSpecies</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">keepIrreversible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">trimolecularProductReversible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">saveSeedModulus</span><span class="o">=-</span><span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> field is the name of any generated seed mechanisms</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">generateSeedEachIteration</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> (default) tells RMG to save and update a seed mechanism and thermo library during the current run</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">saveSeedToDatabase</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> tells RMG (if generating a seed) to also save that seed mechanism and thermo library directly into the database</p>
<p>The <code class="docutils literal notranslate"><span class="pre">units</span></code> field is set to <code class="docutils literal notranslate"><span class="pre">si</span></code>.  Currently there are no other unit options.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">generateOutputHTML</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will let RMG know that you want to save 2-D images (png files in the local <code class="docutils literal notranslate"><span class="pre">species</span></code> folder) of all species in the generated core model.  It will save a visualized
HTML file for your model containing all the species and reactions.  Turning this feature off by setting it to <code class="docutils literal notranslate"><span class="pre">False</span></code> may save memory if running large jobs.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">generatePlots</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will generate a number of plots describing the statistics of the RMG job, including the reaction model core and edge size and memory use versus  execution time. These will be placed in the output directory in the plot/ folder.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">generatePESDiagrams</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will generate potential energy surface diagrams for each pressure dependent network in the model.  These diagrams will be saved in the <code class="docutils literal notranslate"><span class="pre">pdep/</span></code> folder in the output directory. Only applicable if pressure dependence is enabled.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">saveSimulationProfiles</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will make RMG save csv files of the simulation in .csv files in the <code class="docutils literal notranslate"><span class="pre">solver/</span></code> folder.  The filename will be <code class="docutils literal notranslate"><span class="pre">simulation_1_26.csv</span></code> where the first number corresponds to the reaciton system, and the second number corresponds to the total number of species at the point of the simulation.  Therefore, the highest second number will indicate the latest simulation that RMG has complete while enlarging the core model.  The information inside the csv file will provide the time, reactor volume in m^3, as well as mole fractions of the individual species.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">verboseComments</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will make RMG generate chemkin files with complete verbose commentary for the kinetic and thermo parameters.  This will be helpful in debugging what values are being averaged for the kinetics.  Note that this may produce very large files.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">saveEdgeSpecies</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will make RMG generate chemkin files of the edge reactions in addition to the core model in files such as <code class="docutils literal notranslate"><span class="pre">chem_edge.inp</span></code> and <code class="docutils literal notranslate"><span class="pre">chem_edge_annotated.inp</span></code> files located inside the <code class="docutils literal notranslate"><span class="pre">chemkin</span></code> folder.  These files will be helpful in viewing RMG’s estimate for edge reactions and seeing if certain reactions one expects are actually in the edge or not.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">keepIrreversible</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will make RMG import library reactions as is, whether they are reversible or irreversible in the library. Otherwise, if <code class="docutils literal notranslate"><span class="pre">False</span></code> (default value), RMG will force all library reactions to be reversible, and will assign the forward rate from the relevant library.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">trimolecularProductReversible</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> will not allow families with three products to react in the reverse direction. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">saveSeedModulus</span></code> to <code class="docutils literal notranslate"><span class="pre">-1</span></code> will only save the seed from the last iteration at the end of an RMG job. Alternatively, the seed can be saved every <code class="docutils literal notranslate"><span class="pre">n</span></code> iterations by setting <code class="docutils literal notranslate"><span class="pre">saveSeedModulus</span></code> to <code class="docutils literal notranslate"><span class="pre">n</span></code>.</p>
</section>
<section id="species-constraints">
<h2><span class="section-number">4.13. </span>Species Constraints<a class="headerlink" href="#species-constraints" title="Permalink to this heading">¶</a></h2>
<p>RMG can generate mechanisms with a number of optional species constraints,
such as total number of carbon atoms or electrons per species. These are applied to
all of RMG’s reaction families.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">generatedSpeciesConstraints</span><span class="p">(</span>
    <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;input species&#39;</span><span class="p">,</span><span class="s1">&#39;seed mechanisms&#39;</span><span class="p">,</span><span class="s1">&#39;reaction libraries&#39;</span><span class="p">],</span>
    <span class="n">maximumCarbonAtoms</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">maximumOxygenAtoms</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">maximumNitrogenAtoms</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">maximumSiliconAtoms</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">maximumSulfurAtoms</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">maximumHeavyAtoms</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">maximumSurfaceSites</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">maximumSurfaceBondOrder</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">maximumRadicalElectrons</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">maximumSingletCarbenes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">maximumCarbeneRadicals</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">maximumIsotopicAtoms</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">allowSingletO2</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">speciesCuttingThreshold</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>An additional flag <code class="docutils literal notranslate"><span class="pre">allowed</span></code> can be set to allow species
from either the input file, seed mechanisms, or reaction libraries to bypass these constraints.
Note that this should be done with caution, since the constraints will still apply to subsequent
products that form.</p>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">allowSingletO2</span></code> flag is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.  See <a class="reference internal" href="species.html#representing-oxygen"><span class="std std-ref">Representing Oxygen</span></a> for more information.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">speciesCuttingThreshold</span></code> is set by default to 20 heavy atoms. This means that if a species containing
20 or more heavy atoms is generated, it will be automatically split into fragments to save computational resources.
If fragments are not desired, the <code class="docutils literal notranslate"><span class="pre">speciesCuttingThreshold</span></code> may be set to an arbitrarily large number.</p>
</section>
<section id="staging">
<h2><span class="section-number">4.14. </span>Staging<a class="headerlink" href="#staging" title="Permalink to this heading">¶</a></h2>
<p>It is now possible to concatenate different model and simulator blocks into the same run in stages.  Any given stage will terminate when the RMG run terminates and then the current group of model and simulator parameters will be switched out with the next group and the run will continue until that stage terminates.  Once the last stage terminates the run ends normally.  This is currently enabled only for the model and simulator blocks.</p>
<p>There must be the same number of each of these blocks (although only having one simulator block and many model blocks is enabled as well) and RMG will enter each stage these define in the order they were put in the input file.</p>
<p>To enable easier manipulation of staging a new parameter in the model block was developed <code class="docutils literal notranslate"><span class="pre">maxNumSpecies</span></code> that is the number of core species at which that stage (or if it is the last stage the entire model generation process) will terminate.</p>
<p>For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
        <span class="n">toleranceKeepInEdge</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="n">toleranceInterruptSimulation</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="n">maximumEdgeSpecies</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span>
        <span class="n">maxNumSpecies</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="restarting-from-a-seed-mechanism">
<h2><span class="section-number">4.15. </span>Restarting from a Seed Mechanism<a class="headerlink" href="#restarting-from-a-seed-mechanism" title="Permalink to this heading">¶</a></h2>
<p>The only method for restarting an RMG-Py job is to restart the job from a seed mechanism. There are
many scenarios when the user might want to do this, including continuing on a job that ran out of time or crashed as the
result of a now fixed bug. To restart from a seed mechanism, the block below must be added on to the input file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">restartFromSeed</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;seed&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> flag is the path to the seed mechanism folder, which contains three subfolders that must be titled as
follows: filters, seed, seed_edge. The path can be a relative path from the input.py file or an absolute path on disk</p>
<p>Alternatively, you may also specify the paths to each of the following files/directories: coreSeed (path to seed
mechanism folder containing files named <code class="docutils literal notranslate"><span class="pre">reactions.py</span></code> and <code class="docutils literal notranslate"><span class="pre">`dictionary.txt`</span></code> that will go into the model core),
edgeSeed (path to edge seed mechanism folder containing files named <code class="docutils literal notranslate"><span class="pre">reactions.py</span></code> and <code class="docutils literal notranslate"><span class="pre">`dictionary.txt`</span></code> that will
go into the model edge), filters (an h5 binary file storing the uni-, bi-, and optionally tri-molecular thresholds
generated by RMG from previous run (must be RMG version &gt; 2.4.1)), speciesMap (a YAML file specifying what species are
at each index in the filters).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">restartFromSeed</span><span class="p">(</span><span class="n">coreSeed</span><span class="o">=</span><span class="s1">&#39;seed/seed&#39;</span>  <span class="c1"># Path to core seed folder. Must contain `reactions.py` and `dictionary.txt`</span>
                <span class="n">edgeSeed</span><span class="o">=</span><span class="s1">&#39;seed/seed_edge&#39;</span>  <span class="c1"># Path to edge seed folder containing `reactions.py` and `dictionary.txt`</span>
                <span class="n">filters</span><span class="o">=</span><span class="s1">&#39;seed/filters/filters.h5&#39;</span><span class="p">,</span>
                <span class="n">speciesMap</span><span class="o">=</span><span class="s1">&#39;seed/filters/species_map.yml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, to restart from the seed mechanism the input file is submitted as normal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">rmg</span><span class="o">.</span><span class="n">py</span> <span class="nb">input</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Once the restart job has begun, RMG will move the seed mechanism files to a new subfolder in the output directory
entitled <code class="docutils literal notranslate"><span class="pre">previous_restart</span></code>. This is to back-up the seed mechanism used for restarting, as everything in the <code class="docutils literal notranslate"><span class="pre">seed</span></code>
subfolder of the output directory is overwritten by RMG during the course of mechanism generation.</p>
<p>RMG also outputs a file entitled <code class="docutils literal notranslate"><span class="pre">restart_from_seed.py</span></code> the first time a seed mechanism is generated during the course
of an RMG job (so long as the RMG job was not itself a restarted job). This file is an exact duplicate of the original
input file with the exception that the restart block has been added on automatically for convenience. In this way this
file is treated in the exact way as a normal input file.</p>
<p>Finally, <strong>note that it is advised to turn on generating the seed each iteration so that you can restart an RMG job right where it left off</strong>.
This can be done by setting <code class="docutils literal notranslate"><span class="pre">generateSeedEachIteration=True</span></code> in the options block of the input file.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
  <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
    <div class="sphinxsidebarwrapper">
        <div class="sidebarlogo"><a href="../../index.html">
            <img src="../../_static/rmg-logo-small.png" alt="RMG" />
        </a></div>
      <div id="sidebar">
        <div id="rmgsidebar">
          <a href="https://rmg.mit.edu">
            <div class="menuitem">
              <img src="../../_static/rmg-icon.png" class="icon" width="100%"/>
              <div class="menutext menutitle">RMG Website</div>
              <div class="menutext menudesc">Interactive website for RMG-Py</div>
            </div>
          </a>
          <a href="https://github.com/ReactionMechanismGenerator/RMG-Py">
            <div class="menuitem">
              <img src="../../_static/github-icon.png" class="icon" width="100%"/>
              <div class="menutext menutitle">RMG GitHub</div>
              <div class="menutext menudesc">View source and post issues</div>
            </div>
          </a>
        </div>
        <div class="menuitem">
  <div>
    <h3><a href="../../contents.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">4. Creating Input Files</a><ul>
<li><a class="reference internal" href="#syntax">4.1. Syntax</a></li>
<li><a class="reference internal" href="#datasources">4.2. Datasources</a><ul>
<li><a class="reference internal" href="#thermo-libraries">4.2.1. Thermo Libraries</a></li>
<li><a class="reference internal" href="#reaction-libraries">4.2.2. Reaction Libraries</a></li>
<li><a class="reference internal" href="#external-libraries">4.2.3. External Libraries</a></li>
<li><a class="reference internal" href="#seed-mechanisms">4.2.4. Seed Mechanisms</a></li>
<li><a class="reference internal" href="#kinetics-depositories">4.2.5. Kinetics Depositories</a></li>
<li><a class="reference internal" href="#kinetics-families">4.2.6. Kinetics Families</a></li>
<li><a class="reference internal" href="#kinetics-estimator">4.2.7. Kinetics Estimator</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-of-species">4.3. List of species</a></li>
<li><a class="reference internal" href="#forbidden-structures">4.4. Forbidden Structures</a></li>
<li><a class="reference internal" href="#reaction-system">4.5. Reaction System</a><ul>
<li><a class="reference internal" href="#advanced-setting-range-based-reactors">4.5.1. Advanced Setting: Range Based Reactors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#simulator-tolerances">4.6. Simulator Tolerances</a></li>
<li><a class="reference internal" href="#model-tolerances">4.7. Model Tolerances</a><ul>
<li><a class="reference internal" href="#advanced-setting-branching-criterion">4.7.1. Advanced Setting:  Branching Criterion</a></li>
<li><a class="reference internal" href="#advanced-setting-deadend-radical-elimination-rms-reactors-only">4.7.2. Advanced Setting: Deadend Radical Elimination (RMS Reactors only)</a></li>
<li><a class="reference internal" href="#advanced-setting-radical-flux-criterion-rms-reactors-only">4.7.3. Advanced Setting:  Radical Flux Criterion (RMS Reactors Only)</a></li>
<li><a class="reference internal" href="#advanced-setting-transitory-edge-analysis-rms-reactors-only">4.7.4. Advanced Setting:  Transitory Edge Analysis (RMS Reactors Only)</a></li>
<li><a class="reference internal" href="#advanced-setting-speed-up-by-filtering-reactions">4.7.5. Advanced Setting: Speed Up By Filtering Reactions</a></li>
<li><a class="reference internal" href="#advanced-setting-speed-up-by-pruning">4.7.6. Advanced Setting: Speed Up by Pruning</a></li>
<li><a class="reference internal" href="#advanced-setting-thermodynamic-pruning">4.7.7. Advanced Setting: Thermodynamic Pruning</a></li>
<li><a class="reference internal" href="#advanced-setting-taking-multiple-species-at-a-time">4.7.8. Advanced Setting: Taking Multiple Species At A Time</a></li>
<li><a class="reference internal" href="#advanced-settings-other">4.7.9. Advanced Settings: Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#on-the-fly-quantum-calculations">4.8. On the fly Quantum Calculations</a></li>
<li><a class="reference internal" href="#machine-learning-based-thermo-estimation">4.9. Machine Learning-based Thermo Estimation</a></li>
<li><a class="reference internal" href="#pressure-dependence">4.10. Pressure Dependence</a><ul>
<li><a class="reference internal" href="#method-used-for-estimating-pressure-dependent-kinetics">4.10.1. Method used for estimating pressure dependent kinetics</a></li>
<li><a class="reference internal" href="#grain-size-and-minimum-number-of-grains">4.10.2. Grain size and minimum number of grains</a></li>
<li><a class="reference internal" href="#temperature-and-pressure-for-the-interpolation-scheme">4.10.3. Temperature and pressure for the interpolation scheme</a></li>
<li><a class="reference internal" href="#interpolation-scheme">4.10.4. Interpolation scheme</a></li>
<li><a class="reference internal" href="#maximum-size-of-adduct-for-which-pressure-dependence-kinetics-be-generated">4.10.5. Maximum size of adduct for which pressure dependence kinetics be generated</a></li>
</ul>
</li>
<li><a class="reference internal" href="#uncertainty-analysis">4.11. Uncertainty Analysis</a></li>
<li><a class="reference internal" href="#miscellaneous-options">4.12. Miscellaneous Options</a></li>
<li><a class="reference internal" href="#species-constraints">4.13. Species Constraints</a></li>
<li><a class="reference internal" href="#staging">4.14. Staging</a></li>
<li><a class="reference internal" href="#restarting-from-a-seed-mechanism">4.15. Restarting from a Seed Mechanism</a></li>
</ul>
</li>
</ul>

  </div>
        </div>
        <div class="menuitem">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="installation/dependencies.html"
                          title="previous chapter"><span class="section-number">3.5.1. </span>Dependencies</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="examples.html"
                          title="next chapter"><span class="section-number">5. </span>Example Input Files</a></p>
  </div>
        </div>
        <div class="menuitem">
<div role="note" aria-label="source link">
    <h3>This Page</h3>
        <ul class="this-page-menu">
            <li><a href="https://github.com/ReactionMechanismGenerator/RMG-Py/issues">Report A Bug</a></li>
            <li><a href="https://github.com/ReactionMechanismGenerator/RMG-Py/blob/main/documentation/source/users/rmg/input.rst"
                   rel="nofollow">View Source</a></li>
        </ul>
</div>
        </div>
        <div class="menuitem">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="5. Example Input Files"
             >next</a> |</li>
        <li class="right" >
          <a href="installation/dependencies.html" title="3.5.1. Dependencies"
             >previous</a> |</li>
  <li><a href="https://rmg.mit.edu/">RMG</a> &raquo;</li>
  <li><a href="../../index.html">3.3.0 Documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >User’s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >RMG User’s Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4. </span>Creating Input Files</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2002-2025, William H. Green, Richard H. West, and the RMG Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
<script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-24556433-3");
    pageTracker._trackPageview();
  } catch(err) {}
</script>

  </body>
</html>