<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>14.4. Sensitivity Analysis &mdash; RMG Py 1.0.alpha documentation</title>
    
    <link rel="stylesheet" href="../../../_static/rmg.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0.alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="RMG Py 1.0.alpha documentation" href="../../../contents.html" />
    <link rel="up" title="14. Standalone Modules" href="index.html" />
    <link rel="next" title="14.5. Generating Flux Diagrams" href="generateFluxDiagram.html" />
    <link rel="prev" title="14.3. Generate Reactions" href="generateReactions.html" />
<script type="text/x-mathjax-config">
MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
  MathJax.Hub.Insert(MathJax.InputJax.TeX.Definitions.macros,{
    ce: ["Extension","mhchem"],
  });
});
</script>

  </head>
  <body role="document">
<div class="header">
&nbsp;
</div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="generateFluxDiagram.html" title="14.5. Generating Flux Diagrams"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="generateReactions.html" title="14.3. Generate Reactions"
             accesskey="P">previous</a> |</li>
<li><a href="../../../index.html">Documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../../index.html" >User&#8217;s Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >RMG User&#8217;s Guide</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U">14. Standalone Modules</a> &raquo;</li> 
      </ul>
    </div>
            
  <div class="section" id="sensitivity-analysis">
<span id="sensitivity"></span><h1>14.4. Sensitivity Analysis<a class="headerlink" href="#sensitivity-analysis" title="Permalink to this headline">Â¶</a></h1>
<p>For sensitivity analysis, RMG-Py must be compiled with the DASPK solver.
(See <a class="reference internal" href="../installation/linux.html#compile-sensitivity"><span>Compiling RMG-Py with Sensitivity Analysis</span></a> for more details.)
Sensitivity analysis can be conducted in a standalone system for an existing kinetics model in Chemkin format.</p>
<p>To use the sensitivity analysis standalone module:</p>
<div class="highlight-python"><div class="highlight"><pre>python $RMGPy/sensitivity.py input.py chem.inp species_dictionary.txt
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">chem.inp</span></code> is the CHEMKIN file and the <code class="docutils literal"><span class="pre">species_dictionary.txt</span></code> contains the dictionary of
species associated with the CHEMKIN file.  <code class="docutils literal"><span class="pre">input.py</span></code> is an input file similar to one used for an RMG job but
does not generate a RMG job.  See the following <code class="docutils literal"><span class="pre">input.py</span></code> example file found under the
<code class="docutils literal"><span class="pre">$RMGPy/examples/sensitivity/input.py</span></code> folder</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Data sources</span>
<span class="n">database</span><span class="p">(</span>
    <span class="n">thermoLibraries</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;primaryThermoLibrary&#39;</span><span class="p">],</span>
    <span class="n">reactionLibraries</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">seedMechanisms</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="n">kineticsDepositories</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;training&#39;</span><span class="p">],</span>
    <span class="n">kineticsFamilies</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;!Intra_Disproportionation&#39;</span><span class="p">,</span><span class="s">&#39;!Substitution_O&#39;</span><span class="p">],</span>
    <span class="n">kineticsEstimator</span> <span class="o">=</span> <span class="s">&#39;rate rules&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c"># Constraints on generated species</span>
<span class="n">generatedSpeciesConstraints</span><span class="p">(</span>
    <span class="n">maximumRadicalElectrons</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>

<span class="c"># List of species</span>
<span class="n">species</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s">&#39;ethane&#39;</span><span class="p">,</span>
    <span class="n">reactive</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">structure</span><span class="o">=</span><span class="n">SMILES</span><span class="p">(</span><span class="s">&quot;CC&quot;</span><span class="p">),</span>
<span class="p">)</span>

<span class="c"># Reaction systems</span>
<span class="n">simpleReactor</span><span class="p">(</span>
    <span class="n">temperature</span><span class="o">=</span><span class="p">(</span><span class="mi">1350</span><span class="p">,</span><span class="s">&#39;K&#39;</span><span class="p">),</span>
    <span class="n">pressure</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>
    <span class="n">initialMoleFractions</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&quot;ethane&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">terminationConversion</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;ethane&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">terminationTime</span><span class="o">=</span><span class="p">(</span><span class="mf">1e6</span><span class="p">,</span><span class="s">&#39;s&#39;</span><span class="p">),</span>
    <span class="n">sensitivity</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ethane&#39;</span><span class="p">],</span>
    <span class="n">sensitivityThreshold</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">simulator</span><span class="p">(</span>
    <span class="n">atol</span><span class="o">=</span><span class="mf">1e-16</span><span class="p">,</span>
    <span class="n">rtol</span><span class="o">=</span><span class="mf">1e-8</span><span class="p">,</span>
    <span class="n">sens_atol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span>
    <span class="n">sens_rtol</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">model</span><span class="p">(</span>
    <span class="n">toleranceKeepInEdge</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="n">toleranceMoveToCore</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">toleranceInterruptSimulation</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">maximumEdgeSpecies</span><span class="o">=</span><span class="mi">100000</span>
<span class="p">)</span>

<span class="n">options</span><span class="p">(</span>
    <span class="n">units</span><span class="o">=</span><span class="s">&#39;si&#39;</span><span class="p">,</span>
    <span class="n">saveRestartPeriod</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
    <span class="n">saveSimulationProfiles</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">drawMolecules</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">generatePlots</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The names of species named in the input file must coincide with the name specified in the CHEMKIN file.</p>
<p>Sensitivity analysis is conducted for the list of species given for <code class="docutils literal"><span class="pre">sensitivity</span></code> argument in the input file.
The normalized concentration sensitivities with respect to the reaction rate coefficients dln(C_i)/dln(k_j) are saved to a csv file
with the file name <code class="docutils literal"><span class="pre">sensitivity_1_SPC_1.csv</span></code> with the first index value indicating the reactor system and the second naming the index of the species
the sensitivity analysis is conducted for.  Sensitivities to thermo of individual species is also saved as semi normalized sensitivities
dln(C_i)/d(G_j) where the units are given in 1/(kcal mol-1). The sensitivityThreshold is set to some value so that only
sensitivities for dln(C_i)/dln(k_j) &gt; sensitivityThreshold  or dlnC_i/d(G_j) &gt; sensitivityThreshold are saved to this file.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div class="sidebarlogo">
<a href="../../../index.html"><img src="../../../_static/rmg-logo-small.png" alt="RMG" /></a>
</div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="generateReactions.html"
                        title="previous chapter">14.3. Generate Reactions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="generateFluxDiagram.html"
                        title="next chapter">14.5. Generating Flux Diagrams</a></p>
  <h3>This Page </h3>
  <ul class="this-page-menu">
    <li><a href="https://github.com/ReactionMechanismGenerator/RMG-Py/blob/master/documentation/source/users/rmg/modules/sensitivity.rst"
           rel="nofollow">Edit this page</a></li>
  </ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, William H. Green, Richard H. West, and the RMG Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>